!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,s=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),s=0,a=o.length;s<a;s++)n=o[s],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(n){var r=s(a(t),n);return e.require(r,t)}},l=function(e,t){var r=_&&_.createHot(e),o={id:e,exports:{},hot:r};return n[e]=o,t(o.exports,u(e),o),o.exports},c=function(e){return r[e]?c(r[e]):e},d=function(e,t){return c(s(a(e),t))},f=function(e,r){null==r&&(r="/");var i=c(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return l(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};f.alias=function(e,t){r[t]=e};var p=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,E=function(e){if(p.test(e)){var t=e.replace(p,"");o.call(r,t)&&r[t].replace(p,"")!==t+"/index"||(r[t]=e)}if(h.test(e)){var n=e.replace(h,"");o.call(r,n)||(r[n]=e)}};f.register=f.define=function(e,r){if(e&&"object"==typeof e)for(var i in e)o.call(e,i)&&f.register(i,e[i]);else t[e]=r,delete n[e],E(e)},f.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var _=e._hmr&&new e._hmr(d,f,t,n);f._cache=n,f.hmr=_&&_.wrap,f.brunch=!0,e.require=f}}(),function(){var e;"undefined"==typeof window?this:window;require.register("app.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("react"),c=r(l),d=t("partials/notifications"),f=r(d),p=t("partials/menu-left"),h=r(p),E=t("partials/key-overlay"),_=r(E),m=t("helpers/Session"),y=r(m),v=t("i18n"),g=r(v),b=t("helpers/TVKey"),S=r(b),R=t("helpers/KVStore"),N=r(R),k=t("views/mediacenter"),w=r(k),T=t("views/broadcast"),O=r(T),I=t("views/filter-broadcasts"),C=r(I),A=t("views/channel-broadcasts"),G=r(A),P=t("views/channels"),D=r(P),L=t("views/genres"),M=r(L),K=t("views/genre-broadcasts"),j=r(K),F=t("views/player"),Y=r(F),W=t("views/recordings"),q=r(W),U=t("views/collection"),V=r(U),B=t("views/login"),H=r(B),x=t("views/search"),z=r(x),Q=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.backStack=[],n.defaultComponent={component:"MediaCenter",props:{}},n.state={currentComponent:n.defaultComponent,menuFocused:!1,language:N["default"].getItem("language")},n.onKeyDown=n.onKeyDown.bind(n),n.onOpen=n.onOpen.bind(n),n.onReturn=n.onReturn.bind(n),n.onMenuClick=n.onMenuClick.bind(n),n.closeMenu=n.closeMenu.bind(n),n.components={MediaCenter:w["default"],Broadcast:O["default"],FilterBroadcasts:C["default"],ChannelBroadcasts:G["default"],Channels:D["default"],Genres:M["default"],GenreBroadcasts:j["default"],Player:Y["default"],Recordings:q["default"],Collection:V["default"],Login:H["default"],Search:z["default"]},n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown),mediator.subscribe("open",this.onOpen),mediator.subscribe("return",this.onReturn),g["default"].setLanguage(this.state.language)}},{key:"componentWillUpdate",value:function(e,t){t.language!=this.state.language&&(N["default"].setItem("language",t.language),g["default"].setLanguage(t.language))}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),mediator.remove("open",this.onOpen),mediator.remove("return",this.onReturn)}},{key:"closeMenu",value:function(){this.setState({menuFocused:!1})}},{key:"onOpen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.discardStack)this.backStack=[],delete t.discardStack;else{var n=Object.assign({},this.refs.current.props);"function"==typeof this.refs.current.serialize&&(n=Object.assign(n,this.refs.current.serialize())),this.backStack.unshift({component:this.state.currentComponent.component,props:n})}this.setState({currentComponent:{component:e,props:t}})}},{key:"onMenuClick",value:function(e){switch(e){case"search":this.onOpen("Search",{discardStack:!0});break;case"mediacenter":this.onOpen("MediaCenter",{discardStack:!0});break;case"channels":this.onOpen("Channels",{discardStack:!0});break;case"genres":this.onOpen("Genres",{discardStack:!0});break;case"recordings":this.onOpen("Recordings",{discardStack:!0});break;case"login":y["default"].isSignedIn()?y["default"].setToken(null):this.onOpen("Login");break;case"language-de":this.setState({language:"de"});break;case"language-en":this.setState({language:"en"})}}},{key:"onReturn",value:function(){return this.backStack.length>0?(this.setState({currentComponent:this.backStack.shift()}),!0):this.state.currentComponent.component!=this.defaultComponent.component?(this.setState({currentComponent:this.defaultComponent}),!0):("undefined"!=typeof tizen?tizen.application.getCurrentApplication().hide():window.PalmSystem&&PalmSystem.platformBack&&PalmSystem.platformBack(),!1)}},{key:"onKeyDown",value:function(e,t){switch(e){case S["default"].KEY_LEFT:this.state.menuFocused||(t.stopPropagation(),this.setState({menuFocused:!0}));break;case S["default"].KEY_RIGHT:this.state.menuFocused&&(t.stopPropagation(),this.setState({menuFocused:!1}));break;case S["default"].KEY_DOTCOM:t.stopPropagation(),this.requestFullScreen();break;case S["default"].KEY_RETURN:case 27:case 8:case 461:this.onReturn()&&t.stopPropagation();break;default:console.log("Unhandled keyCode: "+e)}}},{key:"isFullScreen",value:function(e){return"function"==typeof e.fullScreen&&e.fullScreen()}},{key:"requestFullScreen",value:function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen()}},{key:"render",value:function(){var e=this.components[this.state.currentComponent.component],t="container-"+this.state.currentComponent.component.toLowerCase();return this.isFullScreen(e)&&(t+=" fullscreen"),c["default"].createElement("div",null,c["default"].createElement(f["default"],null),c["default"].createElement(h["default"],{current:this.state.currentComponent.component.toLowerCase(),focused:this.state.menuFocused,onClick:this.onMenuClick,onCloseMenu:this.closeMenu,visible:!this.isFullScreen(e)}),c["default"].createElement("main",{className:t},c["default"].createElement(e,a({},this.state.currentComponent.props,{isFocused:!this.state.menuFocused,ref:"current"}))),c["default"].createElement(_["default"],{requestFullScreen:this.requestFullScreen.bind(this)}))}}]),t}(c["default"].Component);e["default"]=Q}),require.register("components/date-switcher.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/TVKey"),d=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focusedItem:n.props.focusFunctions.getFocusedItem||0},n.onKeyDown=n.onKeyDown.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown)}},{key:"onKeyDown",value:function(e,t){if(this.props.focused)switch(e){case d["default"].KEY_RIGHT:this.state.focusedItem<1&&(t.stopPropagation(),this.setState({focusedItem:this.state.focusedItem+1}));break;case d["default"].KEY_LEFT:this.state.focusedItem>0&&(t.stopPropagation(),this.setState({focusedItem:this.state.focusedItem-1}));break;case d["default"].KEY_ENTER:t.stopPropagation(),this.onClick()}}},{key:"onClick",value:function(){this.isFocusedLeft()?this.props.dates.previousDate():this.isFocusedRight()&&this.props.dates.nextDate(),this.props.focusFunctions.setFocusedItem(this.state.focusedItem),this.props.focusFunctions.setFocusedRow(0)}},{key:"isFocusedLeft",value:function(){return 0==this.state.focusedItem&&this.props.focused}},{key:"isFocusedRight",value:function(){return 1==this.state.focusedItem&&this.props.focused}},{key:"render",value:function(){if(this.isFocusedLeft())var e=" focused";if(this.isFocusedRight())var t=" focused";return l["default"].createElement("div",{className:"channel-broadcasts-date"},l["default"].createElement("button",{"data-key":"rw",onClick:this.props.dates.previousDate,className:e},"Previous"),l["default"].createElement("div",null,this.props.dates.date),l["default"].createElement("button",{"data-key":"ff",onClick:this.props.dates.nextDate,className:t},"Next"))}}]),t}(l["default"].Component);e["default"]=f}),require.register("components/image-card-view.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e={backgroundImage:'url("'+this.props.image+'")'},t=["image-card-view"];return this.props.className&&t.push(this.props.className),this.props.focused&&t.push("focused"),l["default"].createElement("li",{onClick:this.props.onClick,className:t.join(" ")},l["default"].createElement("div",{className:"image",style:e}),l["default"].createElement("div",{className:"content"},this.props.title,l["default"].createElement("br",null),l["default"].createElement("small",null,this.props.subtitle)))}}]),t}(l["default"].PureComponent);e["default"]=c}),require.register("components/list-row.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/TVKey"),d=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focusedItem:0,screenWidth:0},n.onKeyDown=n.onKeyDown.bind(n),n.onResize=n.onResize.bind(n),n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),window.removeEventListener("resize",this.onResize)}},{key:"componentDidMount",value:function(){this.setState({screenWidth:this.refs.listRow.offsetWidth})}},{key:"onResize",value:function(){this.setState({screenWidth:this.refs.listRow.offsetWidth})}},{key:"onKeyDown",value:function(e,t){if(this.props.focused)switch(e){case d["default"].KEY_RIGHT:this.state.focusedItem<this.props.children.length-1&&(t.stopPropagation(),this.setState({focusedItem:this.state.focusedItem+1}));break;case d["default"].KEY_LEFT:this.state.focusedItem>0&&(t.stopPropagation(),this.setState({focusedItem:this.state.focusedItem-1}));break;case d["default"].KEY_ENTER:"function"==typeof this.props.onItemClick&&this.props.children.length>0&&(t.stopPropagation(),this.props.onItemClick(this.props.children[this.state.focusedItem]));break;case d["default"].KEY_RETURN:case 27:case 8:case 461:this.state.focusedItem>0&&(t.stopPropagation(),this.setState({focusedItem:0}))}}},{key:"getOffsetLeft",value:function(){if(this.state.screenWidth>0&&this.props.children.length>0){var e=this.state.screenWidth/2-this.getItemWidth()/2-this.getItemWidth()*this.state.focusedItem,t=this.state.screenWidth-this.getTotalWidth();return Math.min(0,Math.max(e,t))}return 0}},{key:"getItemWidth",value:function(){return parseInt(this.props.itemWidth,10)+10}},{key:"getTotalWidth",value:function(){return this.getItemWidth()*this.props.children.length-10}},{key:"render",value:function(){var e=this,t=this.getOffsetLeft(),n={WebkitTransform:"translateX("+t+"px)",MozTransform:"translateX("+t+"px)",OTransform:"translateX("+t+"px)",transform:"translateX("+t+"px)",width:this.getTotalWidth()+"px"},r=this.props.children.map(function(t,n){var r={focused:e.props.focused&&n==e.state.focusedItem};return"function"==typeof e.props.onItemClick&&(r.onClick=e.props.onItemClick.bind(e,t)),l["default"].cloneElement(e.props.renderItem(t),r)}),o=["list-row"];this.props.className&&o.push(this.props.className);var i=[];return this.props.title&&i.push(l["default"].createElement("h2",{key:i.length},this.props.title)),i.push(l["default"].createElement("ol",{key:i.length,className:"list-row-items",style:n},r)),l["default"].createElement("li",{ref:"listRow",className:o.join(" ")},i)}}]),t}(l["default"].Component);e["default"]=f}),require.register("components/list.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/TVKey"),d=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focusedRow:n.props.focusedRow||0},n.onKeyDown=n.onKeyDown.bind(n),n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown)}},{key:"onKeyDown",value:function(e,t){switch(e){case d["default"].KEY_UP:this.state.focusedRow>0&&(t.stopPropagation(),this.setState({focusedRow:this.state.focusedRow-1}));break;case d["default"].KEY_DOWN:this.state.focusedRow<this.props.children.length-1&&(t.stopPropagation(),this.setState({focusedRow:this.state.focusedRow+1}))}}},{key:"getOffsetTop",value:function(){if(this.props.children.length>0&&null!=this.refs.list){var e=parseInt(this.props.itemHeight,10)+50+50,t=this.refs.list.offsetHeight,n=t/2-e/2-e*this.state.focusedRow;return Math.min(0,n+25)}return 0}},{key:"render",value:function(){var e=this,t=this.getOffsetTop(),n={WebkitTransform:"translateY("+t+"px)",MozTransform:"translateY("+t+"px)",OTransform:"translateY("+t+"px)",transform:"translateY("+t+"px)"},r="undefined"==typeof this.props.focused||this.props.focused,o=this.props.children.map(function(t,n){return l["default"].cloneElement(t,{focused:r&&n==e.state.focusedRow,itemWidth:e.props.itemWidth,onItemClick:e.props.onItemClick})});return l["default"].createElement("ol",{className:"list",ref:"list",style:n},o)}}]),t}(l["default"].Component);e["default"]=f}),require.register("components/loading-spinner.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e="loading-spinner";return this.props.centerInScreen&&(e+=" center"),l["default"].createElement("div",{className:e},"Loading")}}]),t}(l["default"].Component);e["default"]=c}),require.register("components/message.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e="message";return this.props.centerInScreen&&(e+=" center"),l["default"].createElement("div",{className:e},this.props.text)}}]),t}(l["default"].Component);e["default"]=c}),require.register("helpers/KVStore.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.data={},this.isSupported=!0;try{var t="KVStoreTest";localStorage.setItem(t,t),localStorage.removeItem(t)}catch(n){this.isSupported=!1}}return o(e,[{key:"setItem",value:function(e,t){return this.isSupported?localStorage.setItem(e,t):this.data[e]=String(t)}},{key:"getItem",value:function(e){return this.isSupported?localStorage.getItem(e):this.data.hasOwnProperty(e)?this.data[e]:void 0}},{key:"removeItem",value:function(e){return this.isSupported?localStorage.removeItem(e):delete this.data[e]}}]),e}();e["default"]=new i}),require.register("helpers/Session.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var o=t("./KVStore"),i=r(o);e["default"]={isSignedIn:function(){return null!=this.getToken()},getToken:function(){return i["default"].getItem("token")},setToken:function(e){var t=this.getToken();null==e?i["default"].removeItem("token"):i["default"].setItem("token",e),e!=t&&mediator.publish("sessionChange",this.isSignedIn())},setHeader:function(e){e.setRequestHeader("Authorization","Token token="+this.getToken())}}}),require.register("helpers/TVKey.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={KEY_TOOLS:10135,KEY_MUTE:449,KEY_RETURN:10009,KEY_DONE:65376,KEY_CANCEL:65385,KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_ENTER:13,KEY_INFO:457,KEY_EXIT:10182,KEY_RED:403,KEY_GREEN:404,KEY_YELLOW:405,KEY_BLUE:406,KEY_RW:412,KEY_PAUSE:19,KEY_FF:417,KEY_PLAY:415,KEY_STOP:413,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_0:48,KEY_EMPTY:189,KEY_PRECH:10190,KEY_SOURCE:10072,KEY_CHLIST:10073,KEY_MENU:18,KEY_WLINK:10071,KEY_CC:null,KEY_CONTENT:10071,KEY_FAVCH:null,KEY_REC:416,KEY_EMODE:null,KEY_DMA:null,KEY_PANEL_CH_UP:null,KEY_PANEL_CH_DOWN:null,KEY_PANEL_VOL_UP:null,KEY_PANEL_VOL_DOWN:null,KEY_PANEL_ENTER:10171,KEY_PANEL_SOURCE:null,KEY_PANEL_MENU:null,KEY_PANEL_POWER:null,KEY_POWER:null,KEY_TV:10153,KEY_VOL_UP:447,KEY_VOL_DOWN:448,KEY_CH_UP:427,KEY_CH_DOWN:428,KEY_TTX_MIX:10200,KEY_GUIDE:null,KEY_SUBTITLE:null,KEY_ASPECT:10140,KEY_MTS:10195,KEY_12:1057,KEY_DISC_MENU:null,KEY_3D:10199,KEY_PIP_ONOFF:10235,KEY_AD:10230,KEY_PMODE:10141,KEY_SMODE:10197,KEY_PIP_CHUP:10167,KEY_PIP_CHDOWN:10168,KEY_FF_:10233,KEY_REWIND_:10232,KEY_SUB_TITLE:null,KEY_SLEEP:10150,KEY_D_AUDIO:null,KEY_D_VIEW_MODE:null,KEY_ZOOM1:10222,KEY_ANTENA:10169,KEY_DVR:10218,KEY_HOME:10071,KEY_TV_SNS:10217,KEY_SEARCH:10225,KEY_VTUNER:null,KEY_NETFLIX:10234,KEY_HDMI:10143,KEY_DOTCOM:null,KEY_PANDORA:null,KEY_DIGITAL_LOCKER:null,KEY_EMANUAL:10146,KEY_BT_NUMBER:10193,KEY_BT_HOTKEY:10162,KEY_RECOMMEND_SEARCH_TOGGLE:10192,KEY_PAGEMODE:null,QWERTY_KEY_1:null,QWERTY_KEY_2:null,QWERTY_KEY_3:null,QWERTY_KEY_4:null,QWERTY_KEY_5:null,QWERTY_KEY_6:null,QWERTY_KEY_7:null,QWERTY_KEY_8:null,QWERTY_KEY_9:null,QWERTY_KEY_0:null,KEY_GESTURE_UP:null,KEY_GESTURE_DOWN:null,KEY_GESTURE_LEFT:null,KEY_GESTURE_RIGHT:null,KEY_PAD_1:null,KEY_PAD_2:null,KEY_PAD_3:null,KEY_PAD_4:null,KEY_PAD_5:null,KEY_PAD_6:null,KEY_PAD_7:null,KEY_PAD_8:null,KEY_PAD_9:null,KEY_PAD_0:null}}),require.register("helpers/YouTV.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var o=t("moment-timezone"),i=r(o),s=t("../i18n"),a=r(s),u=t("./Session"),l=r(u),c=t("./KVStore"),d=r(c),f={appName:"YouTV SmartTV",version:"1.1.0",statusNotFound:404,statusUnauthorized:401,statusUnprocessableEntity:422,host:"https://www.youtv.de",timeZone:"Europe/Berlin",reviver:function(e,t){return f.isISO8601String(t)&&(t=(0,i["default"])(t).tz(f.timeZone)),t},handleError:function(e){e.status==f.statusUnauthorized||e.status==f.statusUnprocessableEntity?(e.status==f.statusUnauthorized&&l["default"].setToken(null),mediator.publish("notification","error",e.data.errors.join(", "))):mediator.publish("notification","error",a["default"].t("GLOBAL_NO_CONNECTION"))},getImage:function(e,t,n){n||(n={}),n.excludeFallbacks||(n.excludeFallbacks=!1);var r=1.2;if(n.excludeFallbacks&&(e=e.filter(function(e){e.fallback===!1})),!e||e.length<=0)return null;e.sort(function(e,n){var r=Math.abs(e.width-t),o=Math.abs(n.width-t);return r>o?1:-1});for(var o=0;o<e.length;o++)if(e[o].width*r>=t)return e[o];return e[0]},isISO8601String:function(e){var t=/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})([T\s]([0-9]{1,2}):([0-9]{1,2})(:([0-9]{1,2})(\.([0-9]+))?)?(Z|([+\-])([0-9]{1,2})(:([0-9]{1,2}))?)?)?$/;return t.test(e)},getUniqueID:function(){var e=d["default"].getItem("uniqueID");if(!e){e="";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));d["default"].setItem("uniqueID",e)}return e}};e["default"]=f}),require.register("i18n.jsx",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={language:null,t:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.translations[this.lang()][e])return this.translations[this.lang()][e];if(t.hasOwnProperty("fallback"))return t.fallback;throw e+" is not translated for locale "+this.lang()+"."},lang:function(){var e=this.language||this.getQueryVariable("l")||this.getBrowserLanguage();return this.availableLanguages().indexOf(e)>-1?e:"en"},setLanguage:function(e){this.language=e},availableLanguages:function(){return Object.keys(this.translations)},getQueryVariable:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(decodeURIComponent(o[0])==e)return decodeURIComponent(o[1])}return null},getBrowserLanguage:function(){var e=navigator.language||navigator.userLanguage;return null!=e?e.slice(0,2):null},translations:{de:{GLOBAL_NO_CONNECTION:"Ooops! Es gibt wohl ein Problem mit der Internet-Verbindung.",GLOBAL_NOT_SIGNED_IN:"Melde dich an, um auf diese Funktion zugreifen zu kÃ¶nnen.",GLOBAL_LOADING:"Wird geladenâ€¦",GLOBAL_LANGUAGE_EN:"English",GLOBAL_LANGUAGE_DE:"Deutsch",PARTIALS_MENU_MEDIA_CENTER:"TV Entdecken",PARTIALS_MENU_TV_GUIDE:"TV Programm",PARTIALS_MENU_GENRES:"Genres",PARTIALS_MENU_RECORDINGS:"Aufnahmen",PARTIALS_MENU_LOGIN:"Anmelden",PARTIALS_MENU_LOGOUT:"Abmelden",PARTIALS_MENU_SEARCH:"Suche",VIEWS_RECORDINGS_EMPTY:"Derzeit keine Aufnahmen",VIEWS_RECORDINGS_LAST_RECORDINGS:"Letzte Aufnahmen",VIEWS_RECORDINGS_COLLECTIONS:"Aufnahme Assistenten",VIEWS_COLLECTION_RECORDED:"Aufgenommen",VIEWS_COLLECTION_QUEUED:"Programmiert",VIEWS_BROADCAST_WATCH:"Ansehen",VIEWS_BROADCAST_DELETE:"LÃ¶schen",VIEWS_BROADCAST_RECORD:"Aufnehmen",VIEWS_BROADCAST_BACKGROUND_INFORMATION:"Hintergrundinformationen",VIEWS_BROADCAST_QUEUED:"Programmiert",VIEWS_PLAYER_SKIP_AD:"Ãœberspringen",VIEWS_CHANNEL_BROADCASTS_ACTIONS:"Aktionen",VIEWS_CHANNEL_BROADCASTS_INTERVALS_MORNING:"Morgens",VIEWS_CHANNEL_BROADCASTS_INTERVALS_AFTERNOON:"Nachmittag",VIEWS_CHANNEL_BROADCASTS_INTERVALS_EVENING:"Abends",VIEWS_FILTER_BROADCASTS_ACTIONS:"Aktionen",VIEWS_FILTER_BROADCASTS_EMPTY:"Derzeit keine Sendungen",VIEWS_FILTER_ALL:"Alle",VIEWS_GENRE_BROADCASTS_ACTIONS:"Aktionen",VIEWS_GENRE_BROADCASTS_EMPTY:"Derzeit keine Sendungen",VIEWS_GENRE_ALL:"Alle",VIEWS_LOGIN_DESCRIPTON_PART_1:"Noch nicht registriert?",VIEWS_LOGIN_DESCRIPTON_PART_2:"Jetzt kostenlos auf www.youtv.de registrieren und erstelle dir deine persÃ¶nliche TV Mediathek Ã¼ber Smartphone, Tablet, SmartTV oder jeden Webbrowser.",VIEWS_LOGIN_DESCRIPTON_PART_3:"Mein Fernsehen. Meine Sendungen. Weltweit.",VIEWS_LOGIN_MAIL:"E-Mail",VIEWS_LOGIN_PASSWORD:"Passwort",VIEWS_LOGIN_SUBMIT:"Anmelden",VIEWS_MEDIACENTER_SHOW_ALL:"Alle Sendungen anzeigen",VIEWS_MEDIACENTER_TOP:"Top Sendungen",VIEWS_MEDIACENTER_BLOCKBUSTER:"Blockbuster",VIEWS_MEDIACENTER_POPULAR:"Beliebte Sendungen",VIEWS_SEARCH_HINT:"Durchsuche YouTVâ€¦",VIEWS_SEARCH_TV_GUIDE:"Suchergebnisse im TV Programm",VIEWS_SEARCH_RECORDINGS:"Suchergebnisse in deinen Aufnahmen",VIEWS_SEARCH_NO_RESULTS:"Keine Suchergebnisse",TOGGLE_ASSISTANT_RECORD_SERIES:"Serie aufnehmen",TOGGLE_ASSISTANT_DELETE_SERIES:"Serien-Aufnahme beenden",TOGGLE_ASSISTANT_RECORD_CHANNEL:"Sender Aufnehmen",TOGGLE_ASSISTANT_DELETE_CHANNEL:"Sender-Aufnahme beenden",TOGGLE_ASSISTANT_RECORD_GENRE:"Genre Aufnehmen",TOGGLE_ASSISTANT_DELETE_GENRE:"Genre-Aufnahme beenden",TOGGLE_ASSISTANT_RECORD_FILTER:"Sendungen Aufnehmen",TOGGLE_ASSISTANT_DELETE_FILTER:"Aufnahme beenden",TOGGLE_ASSISTANT_LOADING:"Wird geladenâ€¦",TOGGLE_ARCHIVE_LOADING:"Wird geladenâ€¦",TOGGLE_ARCHIVE_ARCHIVE:"Langzeit-Speicherung",TOGGLE_ARCHIVE_REMOVE:"Aus Langzeitspeicher entfernen"},en:{GLOBAL_NO_CONNECTION:"Ooops! There is a problem with your network connection.",GLOBAL_NOT_SIGNED_IN:"Please sign in to access personal content.",GLOBAL_LOADING:"Loadingâ€¦",GLOBAL_LANGUAGE_EN:"English",GLOBAL_LANGUAGE_DE:"Deutsch",PARTIALS_MENU_MEDIA_CENTER:"TV Explore",PARTIALS_MENU_TV_GUIDE:"TV Guide",PARTIALS_MENU_RECORDINGS:"Recordings",PARTIALS_MENU_GENRES:"Genres",PARTIALS_MENU_LOGIN:"Login",PARTIALS_MENU_LOGOUT:"Logout",PARTIALS_MENU_SEARCH:"Search",VIEWS_RECORDINGS_EMPTY:"Currently no recordings",VIEWS_RECORDINGS_LAST_RECORDINGS:"Latest recordings",VIEWS_RECORDINGS_COLLECTIONS:"Recording collections",VIEWS_COLLECTION_RECORDED:"Recorded",VIEWS_COLLECTION_QUEUED:"Queued",VIEWS_BROADCAST_WATCH:"Watch",VIEWS_BROADCAST_DELETE:"Delete",VIEWS_BROADCAST_QUEUED:"Queued",VIEWS_BROADCAST_RECORD:"Record",VIEWS_PLAYER_SKIP_AD:"Skip",VIEWS_BROADCAST_BACKGROUND_INFORMATION:"Background information",VIEWS_CHANNEL_BROADCASTS_ACTIONS:"Actions",VIEWS_CHANNEL_BROADCASTS_INTERVALS_MORNING:"Morning",VIEWS_CHANNEL_BROADCASTS_INTERVALS_AFTERNOON:"Afternoon",VIEWS_CHANNEL_BROADCASTS_INTERVALS_EVENING:"Evening",VIEWS_FILTER_BROADCASTS_ACTIONS:"Actions",VIEWS_FILTER_BROADCASTS_EMPTY:"Currently no broadcasts",VIEWS_FILTER_ALL:"All",VIEWS_GENRE_BROADCASTS_ACTIONS:"Actions",VIEWS_GENRE_BROADCASTS_EMPTY:"Currently no broadcasts",VIEWS_GENRE_ALL:"All",VIEWS_LOGIN_DESCRIPTON_PART_1:"Not registered yet?",
VIEWS_LOGIN_DESCRIPTON_PART_2:"Sign up for free on www.youtv.de and create your own personalized German TV collection, using your smartphone, tablet, smarttv or webbrowser.",VIEWS_LOGIN_DESCRIPTON_PART_3:"My TV. My broadcasts. Worldwide.",VIEWS_LOGIN_MAIL:"E-mail",VIEWS_LOGIN_PASSWORD:"Password",VIEWS_LOGIN_SUBMIT:"Sign in",VIEWS_MEDIACENTER_SHOW_ALL:"Show all broadcasts",VIEWS_MEDIACENTER_TOP:"Top broadcasts",VIEWS_MEDIACENTER_BLOCKBUSTER:"Blockbuster",VIEWS_MEDIACENTER_POPULAR:"Popular",VIEWS_SEARCH_HINT:"Search through YouTVâ€¦",VIEWS_SEARCH_TV_GUIDE:"Results in the TV program",VIEWS_SEARCH_RECORDINGS:"Results in the recordings",VIEWS_SEARCH_NO_RESULTS:"No results",TOGGLE_ASSISTANT_RECORD_SERIES:"Record series",TOGGLE_ASSISTANT_DELETE_SERIES:"Stop recording series",TOGGLE_ASSISTANT_RECORD_CHANNEL:"Record channel",TOGGLE_ASSISTANT_DELETE_CHANNEL:"Stop recording channel",TOGGLE_ASSISTANT_RECORD_GENRE:"Record genre",TOGGLE_ASSISTANT_DELETE_GENRE:"Stop recording genre",TOGGLE_ASSISTANT_RECORD_FILTER:"Record tv shows",TOGGLE_ASSISTANT_DELETE_FILTER:"Stop recording",TOGGLE_ASSISTANT_LOADING:"Loadingâ€¦",TOGGLE_ARCHIVE_LOADING:"Loadingâ€¦",TOGGLE_ARCHIVE_ARCHIVE:"Longterm-archive",TOGGLE_ARCHIVE_REMOVE:"Remove from longterm-archive","FILTER_deutsche-free-tv-premiere":"TV premieres","FILTER_deutsche-staffelstarts-tv":"Season premieres","FILTER_uefa-champions-league-tv":"UEFA Champions League","FILTER_bundesliga-tv-internet":"Bundesliga","FILTER_weihnachten-fernsehen":"Christmas time","FILTER_deutsche-filme":"German movies","FILTER_most-recordings":"Most recorded","FILTER_olympia-fernsehen-winterspiele":"Olympia 2018","FILTER_fussball-em-fernsehen":"EM 2016","FILTER_best-rating":"Best rated","FILTER_prime-time":"Primetime","FILTER_audio-description":"Audio description",FILTER_hd:"HD movies",FILTER_blockbuster:"Blockbuster","FILTER_deutsches-kinder-fernsehen":"Kids",CHANNELS_hauptsender:"Main channels",CHANNELS_spartensender:"Themed channels",CHANNELS_regionale:"Regional channels","CHANNELS_kinder-familie":"Kids & family",CHANNELS_sport:"Sports",CHANNELS_alle:"All",GENRE_1:"Education",GENRE_2:"Documentaries",GENRE_3:"Children",GENRE_4:"Civilization",GENRE_5:"Music",GENRE_6:"News",GENRE_7:"Series",GENRE_8:"Motion Pictures",GENRE_9:"Sports",GENRE_10:"Talk Shows",GENRE_11:"Conversation",GENRE_12:"Adventure And Action",GENRE_13:"Alpinism",GENRE_14:"Architecture",GENRE_15:"Archaeology",GENRE_16:"Astronomy",GENRE_17:"Foreign Report",GENRE_18:"Occupation And Education",GENRE_19:"Computers And Computer Science",GENRE_20:"Docusoap",GENRE_21:"Documentary",GENRE_22:"Narcotics",GENRE_23:"Food And Drink",GENRE_24:"Ethnology",GENRE_25:"Europe",GENRE_26:"Family And Education",GENRE_27:"Film, Cinema, Tv",GENRE_28:"Leisure And Hobby",GENRE_29:"Story",GENRE_30:"Society And Politics",GENRE_31:"Society And Social Affairs",GENRE_32:"Health",GENRE_33:"House, Building, Living",GENRE_34:"Tracking Shot",GENRE_35:"Church And Religion",GENRE_36:"Consumer Magazine",GENRE_37:"Country And People",GENRE_38:"Landscape Painting",GENRE_39:"Lifestyle",GENRE_40:"Aviation",GENRE_41:"Media",GENRE_42:"People",GENRE_43:"Military",GENRE_44:"Fashion",GENRE_45:"Nature And Environment",GENRE_46:"Plants",GENRE_47:"Philosophy",GENRE_48:"Policy",GENRE_49:"Portrayal",GENRE_50:"Psychology",GENRE_51:"Advisors",GENRE_52:"Reality Soap",GENRE_53:"Law And Crime",GENRE_54:"Regional Magazine",GENRE_55:"Report",GENRE_56:"Science Fiction",GENRE_57:"Urban Image",GENRE_58:"Technique",GENRE_59:"Animals",GENRE_60:"Tourist Industry",GENRE_61:"Communication",GENRE_62:"Further Information Reports",GENRE_63:"Economy And Consumption",GENRE_64:"Science",GENRE_65:"Current Affairs",GENRE_66:"Contemporary History",GENRE_67:"Bedtime Story",GENRE_68:"Children's Magazine",GENRE_69:"Children's News",GENRE_70:"Children's Quiz",GENRE_71:"Children's Programme",GENRE_72:"Puppet Show",GENRE_73:"Puppet Show",GENRE_74:"Cartoon",GENRE_75:"Architecture",GENRE_76:"Visual Arts",GENRE_77:"Traditions",GENRE_78:"Film And Theatre",GENRE_79:"Service And Faith",GENRE_80:"Art And Culture",GENRE_82:"Artist Portrait",GENRE_83:"Literature",GENRE_84:"Magazine",GENRE_85:"Painting",GENRE_86:"Music Documentaries",GENRE_87:"Music And Concerts",GENRE_88:"Music Magazine",GENRE_89:"Rock And Pop",GENRE_90:"Dance",GENRE_91:"Hassle",GENRE_92:"Folk Music",GENRE_93:"Contemporary Music",GENRE_94:"Lottery Drawing",GENRE_95:"News",GENRE_96:"Press Briefing",GENRE_97:"Celebrity News",GENRE_98:"Weather Forecast",GENRE_99:"Adventure Series",GENRE_100:"Action Series",GENRE_101:"Animation Series",GENRE_102:"Anime Series",GENRE_103:"Series Of Doctors",GENRE_104:"Casting Show",GENRE_105:"Clip Show",GENRE_106:"Comedy Series",GENRE_107:"Comedy Show",GENRE_108:"Daily Soap",GENRE_109:"Date Show",GENRE_110:"Drama",GENRE_111:"Family Series",GENRE_112:"Fantasy Series",GENRE_113:"Gala",GENRE_114:"Court Series",GENRE_115:"Winning Show",GENRE_116:"History Series",GENRE_117:"Horror Series",GENRE_118:"Hotel Series",GENRE_119:"Youth Series",GENRE_120:"Children's Series",GENRE_121:"Cooking Show",GENRE_123:"Crime Series",GENRE_124:"Crime Series",GENRE_125:"Mystery Series",GENRE_126:"Doll Series",GENRE_127:"Science Fiction Series",GENRE_128:"Sitcom",GENRE_129:"Telenovela",GENRE_130:"Thriller Series",GENRE_131:"Animal Series",GENRE_132:"Western Series",GENRE_133:"Cartoon Series",GENRE_134:"Adventure Film",GENRE_135:"Action Movie",GENRE_136:"Agent Film",GENRE_137:"Animation Film",GENRE_138:"Bio",GENRE_139:"Documentary",GENRE_140:"Drama",GENRE_141:"Family Film",GENRE_142:"Fantasy Film",GENRE_143:"Gangster Film",GENRE_144:"Trickster Comedy",GENRE_145:"Regional Film",GENRE_146:"History Film",GENRE_147:"Horror Flick",GENRE_148:"Disaster Film",GENRE_149:"Children's Film",GENRE_150:"Comedy",GENRE_151:"War Movie",GENRE_152:"Detective Film",GENRE_153:"Short",GENRE_154:"Love Movie",GENRE_155:"Melodrama",GENRE_156:"Musical Film",GENRE_157:"Fairy Tale Film",GENRE_158:"Political Film",GENRE_159:"Psychological Thriller",GENRE_160:"Romance",GENRE_161:"Satire",GENRE_162:"Science Fiction Film",GENRE_163:"Silent Picture",GENRE_164:"Thrillers",GENRE_165:"Tragicomedy",GENRE_166:"Cartoon",GENRE_167:"Western",GENRE_168:"Animated Cartoon",GENRE_169:"Adventure Sport",GENRE_170:"Alpinism",GENRE_171:"American Football",GENRE_172:"Car Sport",GENRE_173:"Aviation",GENRE_174:"Basketball",GENRE_175:"Biathlon",GENRE_176:"Boccia",GENRE_177:"Archery",GENRE_178:"Boxing",GENRE_179:"Curling",GENRE_180:"Darts",GENRE_181:"Documentaries In Sports",GENRE_182:"Ice Hockey",GENRE_183:"Figure Skating",GENRE_184:"Speed Skating",GENRE_185:"Extreme Sport",GENRE_186:"Swordplay",GENRE_187:"Formula 1",GENRE_188:"Fun Sport",GENRE_189:"Soccer",GENRE_190:"Weightlifting",GENRE_191:"Golf",GENRE_192:"Handball",GENRE_193:"Martial Arts",GENRE_194:"Canoe",GENRE_195:"Weight Training",GENRE_196:"Diving",GENRE_197:"Cross-country Skiing",GENRE_198:"Athletics",GENRE_199:"Magazines And Reports",GENRE_200:"Marathon",GENRE_201:"Motorcycle Sport",GENRE_202:"Motorsport",GENRE_203:"Mountain Bike",GENRE_204:"Nordic Combination",GENRE_205:"Olympic Games",GENRE_206:"Equestrian Sports",GENRE_207:"Cycling",GENRE_208:"Rail",GENRE_209:"Reports On Sports",GENRE_210:"Wrestling",GENRE_211:"Toboggan",GENRE_212:"Rowing",GENRE_213:"Rugby Football",GENRE_214:"Swimming",GENRE_215:"Sailing",GENRE_216:"Alpine Skiing",GENRE_217:"Ski Flying",GENRE_218:"Ski Jumping",GENRE_219:"Snooker",GENRE_220:"Sports",GENRE_221:"Sports News",GENRE_222:"Show Jumping",GENRE_223:"Dancing Sport",GENRE_224:"Tennis",GENRE_225:"Table Tennis",GENRE_226:"Triathlon",GENRE_227:"High Diving",GENRE_228:"Volleyball",GENRE_229:"Water Sports",GENRE_230:"Other Sports",GENRE_231:"Wrestling",GENRE_232:"Discourse",GENRE_233:"Story",GENRE_234:"Society And Social Affairs",GENRE_235:"Discussion",GENRE_236:"Church And Religion",GENRE_237:"Art And Culture",GENRE_238:"Literature",GENRE_239:"Music",GENRE_240:"Philosophy",GENRE_241:"Policy",GENRE_242:"Talkshows In General",GENRE_243:"Economy And Consumption",GENRE_244:"Science",GENRE_245:"Current Affairs",GENRE_246:"General Entertainment",GENRE_247:"Other Shows",GENRE_248:"Cabaret And Satire",GENRE_249:"Carnival",GENRE_250:"Short",GENRE_251:"Music Show",GENRE_252:"Quiz Show",GENRE_253:"Quiz",GENRE_254:"Sketch",GENRE_255:"Game Show",GENRE_256:"Talk And Music",GENRE_257:"Hidden Camera",GENRE_258:"Folk Entertainment",GENRE_259:"Biology",GENRE_260:"Chemistry",GENRE_261:"German",GENRE_262:"Various Educational Programmes",GENRE_263:"English",GENRE_264:"Lifelong Learning",GENRE_265:"French",GENRE_266:"Arts",GENRE_267:"Geography",GENRE_268:"Story",GENRE_269:"Computer Science",GENRE_270:"Italian",GENRE_271:"Mathematics",GENRE_272:"Media Studies",GENRE_273:"Physics",GENRE_274:"Psychology",GENRE_275:"Russian",GENRE_276:"Social Studies",GENRE_277:"Spanish",GENRE_278:"No Specific Genre"}}}}),require.register("initialize.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t("@babel/polyfill"),t("raf/polyfill");var o=t("react-dom"),i=r(o),s=t("react"),a=r(s),u=t("./app"),l=r(u),c=t("./helpers/YouTV"),d=r(c),f=t("./helpers/TVKey"),p=r(f);window.mediator=new Mediator,document.addEventListener("keydown",function(e){var t=["INPUT","TEXTAREA"];if(!(t.indexOf(e.target.tagName)>-1)){var n=e.keyCode||e.which,r=mediator.publish("keydown",n);r&&e.preventDefault()}}),document.addEventListener("mousemove",function(e){mediator.publish("mousemove")}),document.addEventListener("mousewheel",function(e){0!=e.wheelDeltaY?e.wheelDelta<=-120?mediator.publish("keydown",p["default"].KEY_DOWN):mediator.publish("keydown",p["default"].KEY_UP):0!=e.wheelDeltaX&&(e.wheelDelta<=-120?mediator.publish("keydown",p["default"].KEY_RIGHT):mediator.publish("keydown",p["default"].KEY_LEFT))}),"undefined"!=typeof tizen&&(tizen.tvinputdevice.registerKey("ColorF0Red"),tizen.tvinputdevice.registerKey("ColorF1Green"),tizen.tvinputdevice.registerKey("ColorF2Yellow"),tizen.tvinputdevice.registerKey("ColorF3Blue"),tizen.tvinputdevice.registerKey("MediaFastForward"),tizen.tvinputdevice.registerKey("MediaPlayPause"),tizen.tvinputdevice.registerKey("MediaPause"),tizen.tvinputdevice.registerKey("MediaPlay"),tizen.tvinputdevice.registerKey("MediaRewind"),tizen.tvinputdevice.registerKey("MediaStop"),tizen.tvinputdevice.registerKey("ChannelUp"),tizen.tvinputdevice.registerKey("ChannelDown")),"undefined"!=typeof analytics&&(analytics.appName=d["default"].appName,analytics.appVersion=d["default"].version,analytics.trackID="UA-69545312-7",analytics.clientID=d["default"].getUniqueID()),window.onload=function(){i["default"].render(a["default"].createElement(l["default"],null),document.getElementById("app"))}}),require.register("partials/key-overlay.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/TVKey"),d=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mapping={UP:d["default"].KEY_UP,RIGHT:d["default"].KEY_RIGHT,DOWN:d["default"].KEY_DOWN,LEFT:d["default"].KEY_LEFT,ENTER:d["default"].KEY_ENTER,RETURN:d["default"].KEY_RETURN,FULLSCREEN:d["default"].KEY_DOTCOM},n.state={visible:!1},n.visibleTimer=null,n.onMouseMove=n.onMouseMove.bind(n),n.TIMEOUT=2e3,n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("mousemove",this.onMouseMove),document.addEventListener("mousedown",this.onMouseMove)}},{key:"componentWillUnmount",value:function(){mediator.remove("mousemove",this.onMouseMove),document.removeEventListener("mousedown",this.onMouseMove)}},{key:"onMouseMove",value:function(e){var t=this;this.setState({visible:!0}),clearTimeout(this.visibleTimer),this.visibleTimer=setTimeout(function(){t.setState({visible:!1})},this.TIMEOUT)}},{key:"onClick",value:function(e){var t=e.target.dataset.key.toUpperCase();mediator.publish("keydown",this.mapping[t])}},{key:"isFullScreenSupported",value:function(){return"lg"!=this.getParameterByName("platform",document.location.search)&&(document.documentElement.requestFullScreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullScreen)}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}},{key:"render",value:function(){var e="key-overlay";return this.state.visible&&(e+=" visible"),l["default"].createElement("div",{className:e},l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"up"},"Up"),l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"right"},"Right"),l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"down"},"Down"),l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"left"},"Left"),l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"enter"},"Enter"),l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"return"},"Return"),this.isFullScreenSupported()&&l["default"].createElement("button",{onClick:this.onClick.bind(this),"data-key":"fullscreen"},"Fullscreen"))}}]),t}(l["default"].Component);e["default"]=f}),require.register("partials/menu-left.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/TVKey"),d=r(c),f=t("../helpers/Session"),p=r(f),h=t("../i18n"),E=r(h),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focusedMenu:0},n.onKeyDown=n.onKeyDown.bind(n),n.onSessionChange=n.onSessionChange.bind(n),n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){this.setSelectedOfComponent(this.props.current),mediator.subscribe("sessionChange",this.onSessionChange)}},{key:"componentWillUnmount",value:function(){mediator.remove("sessionChange",this.onSessionChange),mediator.remove("keydown",this.onKeyDown)}},{key:"componentDidUpdate",value:function(e,t){!e.focused&&this.props.focused?mediator.subscribe("keydown",this.onKeyDown,99):e.focused&&!this.props.focused&&mediator.remove("keydown",this.onKeyDown)}},{key:"setSelectedOfComponent",value:function(e){var t=this.getButtons().findIndex(function(t){return t.id==e});t>-1&&this.setState({focusedMenu:t})}},{key:"componentWillReceiveProps",value:function(e){this.setSelectedOfComponent(e.current)}},{key:"onClick",value:function(e){mediator.publish("keydown",e)}},{key:"onKeyDown",value:function(e,t){if(this.props.focused)switch(e){case d["default"].KEY_ENTER:t.stopPropagation(),this.refs.menu.children[this.state.focusedMenu].click(),this.props.onCloseMenu();break;case d["default"].KEY_UP:t.stopPropagation(),this.state.focusedMenu>0&&this.setState({focusedMenu:this.state.focusedMenu-1});break;case d["default"].KEY_DOWN:t.stopPropagation(),this.state.focusedMenu<this.refs.menu.children.length-1&&this.setState({focusedMenu:this.state.focusedMenu+1});break;case d["default"].KEY_RIGHT:case d["default"].KEY_RETURN:case 27:case 8:case 461:t.stopPropagation(),this.props.onCloseMenu()}}},{key:"onSessionChange",value:function(){this.forceUpdate()}},{key:"onClick",value:function(e){"function"==typeof this.props.onClick&&this.props.onClick(e)}},{key:"renderButton",value:function(e,t){var n="menu-"+e.id;return this.state.focusedMenu==t&&(n+=" focused"),null!=e.position&&(n+=" "+e.position),e.disabled&&(n+=" disabled"),l["default"].createElement("li",{key:e.id,onClick:this.onClick.bind(this,e.id),className:n},e.label)}},{key:"getButtons",value:function(){var e=[{label:E["default"].t("PARTIALS_MENU_SEARCH"),id:"search"},{label:E["default"].t("PARTIALS_MENU_MEDIA_CENTER"),id:"mediacenter"},{label:E["default"].t("PARTIALS_MENU_TV_GUIDE"),id:"channels"},{label:E["default"].t("PARTIALS_MENU_GENRES"),id:"genres"},{label:E["default"].t("PARTIALS_MENU_RECORDINGS"),id:"recordings"},{label:p["default"].isSignedIn()?E["default"].t("PARTIALS_MENU_LOGOUT"):E["default"].t("PARTIALS_MENU_LOGIN"),id:"login"}],t=E["default"].availableLanguages().map(function(e){return{label:E["default"].t("GLOBAL_LANGUAGE_"+e.toUpperCase()),id:"language-"+e,position:"bottom",disabled:E["default"].lang()!=e}});return e.concat(t)}},{key:"render",value:function(){var e="menu-left";return this.props.focused&&(e+=" focused"),this.props.visible||(e+=" hidden"),l["default"].createElement("ul",{className:e,ref:"menu"},this.getButtons().map(this.renderButton.bind(this)))}}]),t}(l["default"].Component);e["default"]=_}),require.register("partials/notifications.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:null,message:null},n.onNotificationReceived=n.onNotificationReceived.bind(n),n.removeTimeout=null,n.timeout=3e3,n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){mediator.subscribe("notification",this.onNotificationReceived)}},{key:"componentWillUnmount",value:function(){mediator.remove("notification",this.onNotificationReceived)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.removeTimeout),this.state.message&&(this.removeTimeout=setTimeout(this.removeNotification.bind(this),this.timeout))}},{key:"onNotificationReceived",value:function(e,t){this.setState({message:t,type:e})}},{key:"removeNotification",value:function(){this.setState({type:null,message:null}),this.removeTimeout=null}},{key:"render",value:function(){return this.state.message?l["default"].createElement("div",{className:"notification "+this.state.type},this.state.message):null}}]),t}(l["default"].Component);e["default"]=c}),require.register("partials/toggle-archive-button.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/YouTV"),d=r(c),f=t("../helpers/Session"),p=r(f),h=t("../helpers/TVKey"),E=r(h),_=t("../i18n"),m=r(_),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={archive:e.archive,loading:!1},n.loadRequest=null,n.toggleRequest=null,n.onKeyDown=n.onKeyDown.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.toggleRequest&&this.toggleRequest.abort()}},{key:"onKeyDown",value:function(e,t){if(this.props.focused)switch(e){case E["default"].KEY_ENTER:t.stopPropagation(),this.onClick()}}},{key:"onClick",value:function(){if(!this.state.loading)return p["default"].isSignedIn()?void this.toggleArchive(!this.state.archive):void mediator.publish("open","Login")}},{key:"toggleArchive",value:function(e){var t=this;null!=this.toggleRequest&&this.toggleRequest.abort();var n={archive:e};this.toggleRequest=new RequestJS({url:d["default"].host+"/api/v2/recordings/"+this.props.recordingId+".json",method:"PUT",reviver:d["default"].reviver,before:function(e){p["default"].setHeader(e),t.setState({loading:!0})},data:{recording:n},success:function(e){t.setState({loading:!1,archive:e.data.recording.archive})},error:function(e){t.setState({loading:!1}),t.toggleRequest.canceled||d["default"].handleError(e)}}),this.toggleRequest.send()}},{key:"render",value:function(){var e=this.state.archive?m["default"].t("TOGGLE_ARCHIVE_REMOVE"):m["default"].t("TOGGLE_ARCHIVE_ARCHIVE"),t=["button"];return t.concat(this.props.className||[]),this.props.focused&&t.push("focused"),l["default"].createElement("button",{onClick:this.onClick.bind(this),disabled:this.state.loading,className:t.join(" ")},this.state.loading?m["default"].t("TOGGLE_ASSISTANT_LOADING"):e)}}]),t}(l["default"].Component);e["default"]=y}),require.register("partials/toggle-assistant-button.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../helpers/YouTV"),d=r(c),f=t("../helpers/Session"),p=r(f),h=t("../helpers/TVKey"),E=r(h),_=t("../i18n"),m=r(_),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={assistant:null,loading:!0},n.loadRequest=null,n.toggleRequest=null,n.onKeyDown=n.onKeyDown.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;mediator.subscribe("keydown",this.onKeyDown),this.loadRequest=new RequestJS({url:d["default"].host+"/api/v2/recording_assistants.json?compact=true",reviver:d["default"].reviver,before:function(e){p["default"].setHeader(e)},success:function(t){e.setState({loading:!1,assistant:t.data.recording_assistants.find(function(t){return t.type==e.props.type&&t.uid==e.props.typeId})})}}),this.loadRequest.send()}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.loadRequest&&this.loadRequest.abort(),null!=this.toggleRequest&&this.toggleRequest.abort()}},{key:"onKeyDown",value:function(e,t){if(this.props.focused)switch(e){case E["default"].KEY_ENTER:t.stopPropagation(),this.onClick()}}},{key:"onClick",value:function(){if(!this.state.loading)return p["default"].isSignedIn()?void(this.state.assistant?this.removeAssistant():this.createAssistant()):void mediator.publish("open","Login")}},{key:"removeAssistant",value:function(){var e=this;null!=this.toggleRequest&&this.toggleRequest.abort(),this.toggleRequest=new RequestJS({url:d["default"].host+"/api/v2/recording_assistants/"+this.state.assistant.id+".json",method:"DELETE",reviver:d["default"].reviver,before:function(t){p["default"].setHeader(t),e.setState({loading:!0})},success:function(t){e.setState({loading:!1,assistant:null})},error:function(t){e.toggleRequest.canceled||d["default"].handleError(t)}}),this.toggleRequest.send()}},{key:"createAssistant",value:function(){var e=this;null!=this.toggleRequest&&this.toggleRequest.abort();var t=void 0;switch(this.props.type){case"series":t={series_id:this.props.typeId};break;case"channel":t={channel_id:this.props.typeId};break;case"genre":t={genre_id:this.props.typeId};break;case"filter":t={filter_id:this.props.typeId}}this.toggleRequest=new RequestJS({url:d["default"].host+"/api/v2/recording_assistants.json",method:"POST",reviver:d["default"].reviver,before:function(t){p["default"].setHeader(t),e.setState({loading:!0})},data:{recording_assistant:t},success:function(t){e.setState({loading:!1,assistant:t.data.recording_assistant})},error:function(t){e.toggleRequest.canceled||d["default"].handleError(t)}}),this.toggleRequest.send()}},{key:"render",value:function(){var e=this.state.assistant?m["default"].t("TOGGLE_ASSISTANT_DELETE_"+this.props.type.toUpperCase()):m["default"].t("TOGGLE_ASSISTANT_RECORD_"+this.props.type.toUpperCase()),t=["button"];return t=t.concat(this.props.className||[]),this.props.focused&&t.push("focused"),l["default"].createElement("button",{onClick:this.onClick.bind(this),disabled:this.state.loading,className:t.join(" ")},this.state.loading?m["default"].t("TOGGLE_ASSISTANT_LOADING"):e)}}]),t}(l["default"].Component);e["default"]=y}),require.register("views/broadcast.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("react-dom"),d=r(c),f=t("../components/loading-spinner"),p=r(f),h=t("../helpers/TVKey"),E=r(h),_=t("../helpers/YouTV"),m=r(_),y=t("../helpers/Session"),v=r(y),g=t("../partials/toggle-assistant-button"),b=r(g),S=t("../partials/toggle-archive-button"),R=r(S),N=t("../i18n"),k=r(N),w=300,T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus={HEADER:"header",SPLIT:"split",CONTENT:"content"},n.state=Object.assign({loading:!0,broadcast:null,focus:n.focus.SPLIT,focusedButton:null,recordingLoading:!0,recording:null,contentScrollPosition:0},e),n.onKeyDown=n.onKeyDown.bind(n),n.request=null,n.recordingRequest=null,n}return s(t,e),a(t,[{key:"serialize",value:function(){return this.state}},{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentDidMount",value:function(){null==this.state.broadcast&&this.loadData(),null==this.state.recording&&v["default"].isSignedIn()&&this.loadRecording()}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.request&&this.request.abort(),null!=this.recordingRequest&&this.recordingRequest.abort()}},{key:"componentDidUpdate",value:function(){this.availableActions().length>0&&(null==this.state.focusedButton||this.availableActions().indexOf(this.state.focusedButton)==-1)&&this.setState({focusedButton:this.availableActions()[0]})}},{key:"onKeyDown",value:function(e,t){switch(e){case E["default"].KEY_ENTER:switch(t.stopPropagation(),this.state.focusedButton){case"watch":this.onWatchBroadcast();break;case"delete":this.onDeleteRecording();break;case"record":this.onRecordBroadcast()}break;case E["default"].KEY_UP:switch(t.stopPropagation(),this.state.focus){case this.focus.SPLIT:this.setState({focus:this.focus.HEADER});break;case this.focus.CONTENT:this.state.contentScrollPosition>0?this.setState({contentScrollPosition:Math.max(0,this.state.contentScrollPosition-w)}):this.setState({focus:this.focus.SPLIT})}break;case E["default"].KEY_DOWN:switch(t.stopPropagation(),this.state.focus){case this.focus.HEADER:this.setState({focus:this.focus.SPLIT});break;case this.focus.SPLIT:this.setState({focus:this.focus.CONTENT});break;case this.focus.CONTENT:var n=d["default"].findDOMNode(this.refs.broadcastTextWrapper),r=d["default"].findDOMNode(this.refs.broadcastText);r.scrollHeight-this.state.contentScrollPosition>n.scrollHeight-100&&(console.log("scroll down!"),this.setState({contentScrollPosition:this.state.contentScrollPosition+w}))}break;case E["default"].KEY_RIGHT:if(!this.state.focusedButton)return;var o=this.availableActions().indexOf(this.state.focusedButton);o<this.availableActions().length-1&&(this.setState({focusedButton:this.availableActions()[o+1]}),t.stopPropagation());break;case E["default"].KEY_LEFT:if(!this.state.focusedButton)return;var i=this.availableActions().indexOf(this.state.focusedButton);i>0&&(this.setState({focusedButton:this.availableActions()[i-1]}),t.stopPropagation())}}},{key:"loadData",value:function(){var e=this;this.request=new RequestJS({url:m["default"].host+"/api/v2/broadcasts/"+this.props.id+".json",reviver:m["default"].reviver,success:function(t){e.setState({loading:!1,broadcast:t.data.broadcast})},error:function(t){e.request.canceled||(e.setState({loading:!1}),m["default"].handleError(t))}}),this.request.send()}},{key:"onWatchBroadcast",value:function(){if(v["default"].isSignedIn()){if(!this.state.recording)return;
this.state.recording.file_errors.length>0?mediator.publish("notification","error",this.state.recording.file_errors.join(", ")):this.state.recording.files.length>0&&this.openPlayer(this.state.recording.files)}else mediator.publish("open","Login")}},{key:"onDeleteRecording",value:function(){var e=this;this.state.recording&&(this.request=new RequestJS({url:m["default"].host+"/api/v2/recordings/"+this.props.id+".json",method:"DELETE",reviver:m["default"].reviver,before:function(e){v["default"].setHeader(e)},success:function(t){e.setState({recording:t.data.recording})},error:function(t){e.request.canceled||m["default"].handleError(t)}}),this.request.send())}},{key:"onRecordBroadcast",value:function(){var e=this;return v["default"].isSignedIn()?(this.request=new RequestJS({url:m["default"].host+"/api/v2/recordings.json",method:"POST",reviver:m["default"].reviver,data:{recording:{broadcast_id:this.props.id}},before:function(e){v["default"].setHeader(e)},success:function(t){e.setState({recording:t.data.recording})},error:function(t){e.request.canceled||m["default"].handleError(t)}}),void this.request.send()):void mediator.publish("open","Login")}},{key:"onRecordSeries",value:function(){null!=this.refs.recordSeriesButton&&this.refs.recordSeriesButton.onClick()}},{key:"loadRecording",value:function(){var e=this;this.recordingRequest=new RequestJS({url:m["default"].host+"/api/v2/recordings/"+this.props.id+".json",reviver:m["default"].reviver,before:function(e){v["default"].setHeader(e)},success:function(t){e.setState({recordingLoading:!1,recording:t.data.recording})},error:function(t){e.recordingRequest.canceled||e.setState({recordingLoading:!1,recording:null})}}),this.recordingRequest.send()}},{key:"openPlayer",value:function(e){var t=this.state.recording.resume_time>0?this.state.recording.resume_time:this.state.recording.start_time,n=this.state.recording.start_time+60*this.state.broadcast.duration;t>n&&(t=this.state.recording.start_time),mediator.publish("open","Player",{poster:m["default"].getImage(this.state.recording.image,1280).url,files:e,captionUrl:this.state.recording.ut_url,id:this.state.broadcast.id,startTime:t,onExit:this.onPlayerExit.bind(this)})}},{key:"onPlayerExit",value:function(e){if(e/=1e3,!(e<60)){this.state.recording.resume_time=e;var t=new RequestJS({url:m["default"].host+"/api/v2/recordings/"+this.props.id+".json",method:"PUT",reviver:m["default"].reviver,before:function(e){v["default"].setHeader(e)},data:{recording:{resume_time:e}},success:function(){}});t.send()}}},{key:"availableActions",value:function(){var e=[];return this.state.recording?(this.state.recording.recorded&&e.push("watch"),e.push("delete")):this.state.recordingLoading||e.push("record"),this.state.recording&&e.push("archive"),!this.state.recordingLoading&&this.state.broadcast&&this.state.broadcast.series_id&&v["default"].isSignedIn()&&e.push("record-series"),e}},{key:"buildSubtitle",value:function(){var e=[],t=this.state.broadcast;if(null!=t.series_season&&null!=t.series_number?e.push("S"+t.series_season+" E"+t.series_number):null!=t.series_season?e.push("S"+t.series_season):null!=t.series_number&&e.push("E"+t.series_number),null!=t.starts_at&&e.push(t.starts_at.format("DD.MM.YYYY HH:mm")),e.push(t.channel_name),null!=t.duration&&t.duration>0&&e.push(t.duration+" min"),null!=t.genre.name&&e.push(t.genre.name),null!=t.production_year&&null!=t.country&&e.push(t.country+" ("+t.production_year+")"),e.push("<br/>"),null!=t.rating&&t.rating>0){var n,r=[],o=Math.round(2*t.rating);for(n=0;n<5;n++)o>=2?(r.push(l["default"].createElement("img",{key:"star-full-"+n,src:"images/broadcast/star_gray_24px-313477b7.svg"})),o-=2):o>=1?(r.push(l["default"].createElement("img",{key:"star-half-"+n,src:"images/broadcast/star_half_gray_24px-0872b463.svg"})),o-=1):r.push(l["default"].createElement("img",{key:"star-empty-"+n,src:"images/broadcast/star_border_gray_24px-03d42aac.svg"}));r=r.reduce(function(e,t){return e.concat([t,l["default"].createElement("span",{style:{margin:"0 0 0 4px"}})])},[]),e.push(r)}return t.ad&&e.push(l["default"].createElement("img",{key:"icon-ad",src:"images/broadcast/ad_gray_24px-49085562.svg"})),t.ut&&e.push(l["default"].createElement("img",{key:"icon-ut",src:"images/broadcast/captions_gray_24px-49c1d624.svg"})),t.qualities.indexOf("hd")>0&&e.push(l["default"].createElement("img",{key:"icon-hd",src:"images/broadcast/hd_gray_24px-71666f79.svg"})),null!=t.fsk&&t.fsk>0&&e.push(l["default"].createElement("b",{key:"info-fsk"},"FSK ",t.fsk)),e.reduce(function(e,t,n){return"<br/>"==t?e.concat([l["default"].createElement("br",{key:n})]):e.concat([t,l["default"].createElement("span",{key:n,style:{margin:"0 0 0 16px"}})])},[])}},{key:"buildTitle",value:function(){}},{key:"renderActions",value:function(){var e=this,t=[];return this.availableActions().forEach(function(n){switch(n){case"watch":t.push(l["default"].createElement("li",{key:"watch"},l["default"].createElement("button",{onClick:e.onWatchBroadcast.bind(e),className:"watch"==e.state.focusedButton?"button focused":"button"},k["default"].t("VIEWS_BROADCAST_WATCH"))));break;case"delete":t.push(l["default"].createElement("li",{key:"delete"},l["default"].createElement("button",{onClick:e.onDeleteRecording.bind(e),className:"delete"==e.state.focusedButton?"button danger focused":"button danger"},k["default"].t("VIEWS_BROADCAST_"+("queued"==e.state.recording.status?"QUEUED":"DELETE")))));break;case"record":t.push(l["default"].createElement("li",{key:"record"},l["default"].createElement("button",{onClick:e.onRecordBroadcast.bind(e),className:"record"==e.state.focusedButton?"button focused":"button"},k["default"].t("VIEWS_BROADCAST_RECORD"))));break;case"record-series":t.push(l["default"].createElement("li",{key:"record-series"},l["default"].createElement(b["default"],{ref:"recordSeriesButton",focused:"record-series"==e.state.focusedButton,type:"series",typeId:e.state.broadcast.series_id})));break;case"archive":t.push(l["default"].createElement("li",{key:"archive"},l["default"].createElement(R["default"],{ref:"recordSeriesButton",focused:"archive"==e.state.focusedButton,recordingId:e.state.broadcast.id,archive:!!e.state.recording&&e.state.recording.archive})))}}),this.state.recordingLoading&&v["default"].isSignedIn()&&t.push(l["default"].createElement("li",{key:"loading"},l["default"].createElement("span",null,k["default"].t("GLOBAL_LOADING")))),t}},{key:"render",value:function(){if(this.state.loading||!this.state.broadcast)return l["default"].createElement(p["default"],{centerInScreen:!0});var e={backgroundImage:"url('"+m["default"].getImage(this.state.broadcast.image,1280).url+"')"},t={backgroundImage:"url('"+m["default"].getImage(this.state.broadcast.image,300).url+"')"};return l["default"].createElement("div",{className:"broadcast-wrapper","data-focus":this.state.focus},l["default"].createElement("div",{className:"broadcast-header",style:e}),l["default"].createElement("div",{className:"broadcast-content"},l["default"].createElement("ul",{className:"broadcast-actions"},this.renderActions()),l["default"].createElement("div",{ref:"broadcastTextWrapper",className:"broadcast-image-text"},l["default"].createElement("div",{className:"broadcast-image",style:t}),l["default"].createElement("div",{ref:"broadcastText",className:"broadcast-text",style:{top:-this.state.contentScrollPosition+50+"px"}},l["default"].createElement("h2",null,this.state.broadcast.title,this.state.broadcast.subtitle&&l["default"].createElement("span",null,", ",this.state.broadcast.subtitle),l["default"].createElement("br",null),l["default"].createElement("small",null,this.buildSubtitle())),l["default"].createElement("p",null,this.state.broadcast.long_text||this.state.broadcast.short_text||this.state.broadcast.background_text)))))}}]),t}(l["default"].Component);e["default"]=T}),require.register("views/channel-broadcasts.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("moment-timezone"),l=r(u),c=t("react"),d=r(c),f=t("../components/date-switcher"),p=r(f),h=t("../components/image-card-view"),E=r(h),_=t("../components/list"),m=r(_),y=t("../components/list-row"),v=r(y),g=t("../components/loading-spinner"),b=r(g),S=t("../helpers/Session"),R=r(S),N=t("../helpers/TVKey"),k=r(N),w=t("../helpers/YouTV"),T=r(w),O=t("../i18n"),I=r(O),C=t("../partials/toggle-assistant-button"),A=r(C),G=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.request=null,n.minDate=(0,l["default"])().tz(T["default"].timeZone).subtract(8,"day"),n.maxDate=(0,l["default"])().tz(T["default"].timeZone).add(21,"day"),n.state={loading:!0,focusedDateSwitcherItem:0,focusedRow:1,date:e.date||(0,l["default"])().tz(T["default"].timeZone),broadcasts:[]},n.onItemClick=n.onItemClick.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.renderAction=n.renderAction.bind(n),n}return s(t,e),a(t,[{key:"serialize",value:function(){return{date:this.state.date}}},{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.request&&this.request.abort()}},{key:"componentDidUpdate",value:function(e,t){this.state.date.get("date")!=t.date.get("date")&&this.loadData()}},{key:"onKeyDown",value:function(e,t){switch(e){case k["default"].KEY_CH_UP:case k["default"].KEY_FF:case 78:t.stopPropagation(),this.setState({focusedDateSwitcherItem:0,focusedRow:1}),this.nextDate();break;case k["default"].KEY_CH_DOWN:case k["default"].KEY_RW:case 80:t.stopPropagation(),this.setState({focusedDateSwitcherItem:0,focusedRow:1}),this.previousDate()}}},{key:"previousDate",value:function(){var e=(0,l["default"])(this.state.date).subtract(1,"day");this.setState({date:l["default"].max(e,this.minDate)})}},{key:"nextDate",value:function(){var e=(0,l["default"])(this.state.date).add(1,"day");this.setState({date:l["default"].min(e,this.maxDate)})}},{key:"loadData",value:function(){var e=this;null!=this.request&&this.request.abort(),this.setState({loading:!0,broadcasts:[]}),this.request=new RequestJS({url:T["default"].host+"/api/v2/channels/"+this.props.channelId+"/broadcasts.json?date="+this.state.date.format("YYYY-MM-DD"),reviver:T["default"].reviver,success:function(t){e.setState({loading:!1,broadcasts:t.data.broadcasts})},error:function(t){e.request.canceled||(e.setState({loading:!1}),T["default"].handleError(t))}}),this.request.send()}},{key:"onItemClick",value:function(e){e.__type__&&"action"==e.__type__||mediator.publish("open","Broadcast",{id:e.id})}},{key:"setFocusedDateSwitcherItem",value:function(e){this.setState({focusedDateSwitcherItem:e})}},{key:"setFocusedRow",value:function(e){this.setState({focusedRow:e})}},{key:"renderItem",value:function(e){var t=[e.starts_at.format("HH:mm"),e.subtitle].filter(function(e){return null!=e});return d["default"].createElement(E["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:T["default"].getImage(e.image,300).url})}},{key:"renderAction",value:function(e){if("date-switcher"==e.id){var t={previousDate:this.previousDate.bind(this),nextDate:this.nextDate.bind(this),date:this.state.date.format("DD.MM.YYYY")},n={getFocusedItem:this.state.focusedDateSwitcherItem,setFocusedItem:this.setFocusedDateSwitcherItem.bind(this),setFocusedRow:this.setFocusedRow.bind(this)};return d["default"].createElement(p["default"],{key:e.id,dates:t,focusFunctions:n})}return d["default"].createElement(A["default"],{key:e.id,className:["button-channel"],bindSelf:!0,type:"channel",focused:!1,typeId:this.props.channelId})}},{key:"render",value:function(){var e=this;if(this.state.loading)return d["default"].createElement("div",{className:"channel-broadcasts-wrapper"},d["default"].createElement(b["default"],{centerInScreen:!0}));var t=[{title:I["default"].t("VIEWS_CHANNEL_BROADCASTS_INTERVALS_EVENING"),from:this.state.date.clone().set({hour:20,minute:0,second:0}),to:this.state.date.clone().set({hour:23,minute:59,second:59}),broadcasts:[]},{title:I["default"].t("VIEWS_CHANNEL_BROADCASTS_INTERVALS_AFTERNOON"),from:this.state.date.clone().set({hour:12,minute:0,second:0}),to:this.state.date.clone().set({hour:19,minute:59,second:59}),broadcasts:[]},{title:I["default"].t("VIEWS_CHANNEL_BROADCASTS_INTERVALS_MORNING"),from:this.state.date.clone().set({hour:0,minute:0,second:0}),to:this.state.date.clone().set({hour:11,minute:59,second:59}),broadcasts:[]}];this.state.broadcasts.forEach(function(e){t.forEach(function(t){if(e.starts_at.isBetween(t.from,t.to,"minutes","[]"))return void t.broadcasts.push(e)})}),t=t.filter(function(e){return e.broadcasts.length>0});var n=[],r=[];return r.push({__type__:"action",id:"date-switcher"}),R["default"].isSignedIn()&&r.push({__type__:"action",id:"record-channel"}),n.push(d["default"].createElement(v["default"],{className:"reduced-margin-bottom",key:"actions",focuse:!1,renderItem:this.renderAction},r)),n=n.concat(t.map(function(t,n){var r="interval"+n;return d["default"].createElement(v["default"],{title:t.title,key:r,renderItem:e.renderItem},t.broadcasts)})),d["default"].createElement("div",{className:"channel-broadcasts-wrapper"},d["default"].createElement(m["default"],{focused:this.props.isFocused,focusedRow:this.state.focusedRow,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},n))}}]),t}(d["default"].Component);e["default"]=G}),require.register("views/channels.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/TVKey"),p=(r(f),t("../helpers/YouTV")),h=r(p),E=t("../components/list"),_=r(E),m=t("../components/list-row"),y=r(m),v=t("../components/image-card-view"),g=r(v),b=t("../i18n"),S=r(b),R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,channelGroups:[]},n.request=null,n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){null!=this.request&&this.request.abort()}},{key:"loadData",value:function(){var e=this;this.request=new RequestJS({url:h["default"].host+"/api/v2/channel_groups.json",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,channelGroups:t.data.channel_groups})},error:function(t){e.request.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.request.send()}},{key:"onItemClick",value:function(e){mediator.publish("open","ChannelBroadcasts",{channelId:e.id})}},{key:"renderItem",value:function(e){return l["default"].createElement(g["default"],{className:"card-view-channel",key:e.id,title:e.name,image:h["default"].getImage(e.logo_inverted,300).url})}},{key:"render",value:function(){var e=this;if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});var t=this.state.channelGroups.map(function(t){return l["default"].createElement(y["default"],{title:S["default"].t("CHANNELS_"+t.uid,{fallback:t.name}),key:t.uid,renderItem:e.renderItem},t.channels)});return l["default"].createElement(_["default"],{focused:this.props.isFocused,itemWidth:"170",itemHeight:"170",onItemClick:this.onItemClick},t)}}]),t}(l["default"].Component);e["default"]=R}),require.register("views/collection.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/Session"),p=r(f),h=t("../helpers/TVKey"),E=(r(h),t("../helpers/YouTV")),_=r(E),m=t("../components/list"),y=r(m),v=t("../components/list-row"),g=r(v),b=t("../components/image-card-view"),S=r(b),R=t("../components/message"),N=r(R),k=t("../i18n"),w=r(k),T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.limit=1e3,n.state={loading:!0,recorded:[],queued:[]},n.request=null,n.onSessionChange=n.onSessionChange.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){p["default"].isSignedIn()&&this.loadData(),mediator.subscribe("sessionChange",this.onSessionChange)}},{key:"componentWillUnmount",value:function(){null!=this.request&&this.request.abort(),mediator.remove("sessionChange",this.onSessionChange)}},{key:"loadData",value:function(){var e=this;this.request=new RequestJS({url:_["default"].host+"/api/v2/recordings.json?recording_collection_id="+this.props.id,reviver:_["default"].reviver,before:function(e){p["default"].setHeader(e)},success:function(t){var n=t.data.recordings.filter(function(e){return e.recorded}),r=t.data.recordings.filter(function(e){return!e.recorded});n.length>e.limit&&(n=n.slice(0,e.limit)),r.length>e.limit&&(r=r.slice(0,e.limit)),n.sort(function(e,t){return e.starts_at.isAfter(t.starts_at)?-1:1}),r.sort(function(e,t){return e.starts_at.isBefore(t.starts_at)?-1:1}),e.setState({loading:!1,recorded:n,queued:r})},error:function(t){e.request.canceled||(e.setState({loading:!1}),t.status==_["default"].statusNotFound?mediator.publish("return"):_["default"].handleError(t))}}),this.request.send()}},{key:"onSessionChange",value:function(){this.forceUpdate()}},{key:"onItemClick",value:function(e){mediator.publish("open","Broadcast",{id:e.id})}},{key:"renderItem",value:function(e){var t=[e.subtitle,e.starts_at.format("DD.MM HH:mm"),e.channel_name].filter(function(e){return null!=e});return l["default"].createElement(S["default"],{onClick:this.onItemClick.bind(this,e),key:e.id,title:e.title,subtitle:t.join(", "),image:_["default"].getImage(e.image,330).url})}},{key:"render",value:function(){if(!p["default"].isSignedIn())return l["default"].createElement(N["default"],{text:w["default"].t("GLOBAL_NOT_SIGNED_IN"),centerInScreen:!0});if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});if(0==this.state.recorded.length&&0==this.state.queued.length)return l["default"].createElement(N["default"],{text:w["default"].t("VIEWS_RECORDINGS_EMPTY"),centerInScreen:!0});var e=[l["default"].createElement(g["default"],{title:w["default"].t("VIEWS_COLLECTION_RECORDED"),key:"recorded",renderItem:this.renderItem},this.state.recorded),l["default"].createElement(g["default"],{title:w["default"].t("VIEWS_COLLECTION_QUEUED"),key:"queued",renderItem:this.renderItem},this.state.queued)];return l["default"].createElement(y["default"],{focused:this.props.isFocused,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},e.filter(function(e){return e.props.children.length>0}))}}]),t}(l["default"].Component);e["default"]=T}),require.register("views/filter-broadcasts.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/TVKey"),p=(r(f),t("../helpers/YouTV")),h=r(p),E=t("../components/list"),_=r(E),m=t("../components/list-row"),y=r(m),v=t("../components/image-card-view"),g=r(v),b=t("../components/message"),S=r(b),R=t("../partials/toggle-assistant-button"),N=r(R),k=t("../helpers/Session"),w=r(k),T=t("../i18n"),O=r(T),I=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.request=null,n.state={loading:!0,broadcasts:[]},n.onItemClick=n.onItemClick.bind(n),n.renderAction=n.renderAction.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){null!=this.request&&this.request.abort()}},{key:"loadData",value:function(){var e=this;null!=this.request&&this.request.abort(),this.setState({loading:!0,broadcasts:[]}),this.request=new RequestJS({url:h["default"].host+"/api/v2/filters/"+this.props.filterId+"/broadcasts.json?page_size=50",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,broadcasts:t.data.broadcasts})},error:function(t){e.request.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.request.send()}},{key:"onItemClick",value:function(e){e.__type__&&"action"==e.__type__||mediator.publish("open","Broadcast",{id:e.id})}},{key:"renderItem",value:function(e){var t=[e.starts_at.format("HH:mm"),e.subtitle].filter(function(e){return null!=e});return l["default"].createElement(g["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:h["default"].getImage(e.image,300).url})}},{key:"renderAction",value:function(e){return l["default"].createElement(N["default"],{key:e.id,bindSelf:!0,type:"filter",focused:!1,typeId:this.props.filterId})}},{key:"render",value:function(){if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});if(this.state.broadcasts.length>0){var e=[l["default"].createElement(y["default"],{title:O["default"].t("VIEWS_FILTER_ALL"),key:"all",renderItem:this.renderItem},this.state.broadcasts)];return w["default"].isSignedIn()&&e.push(l["default"].createElement(y["default"],{title:O["default"].t("VIEWS_FILTER_BROADCASTS_ACTIONS"),key:"actions",renderItem:this.renderAction},[{__type__:"action",id:"record-filter"}])),l["default"].createElement(_["default"],{focused:this.props.isFocused,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},e)}return l["default"].createElement(S["default"],{centerInScreen:!0,text:O["default"].t("VIEWS_FILTER_BROADCASTS_EMPTY")})}}]),t}(l["default"].Component);e["default"]=I}),require.register("views/genre-broadcasts.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/TVKey"),p=(r(f),t("../helpers/YouTV")),h=r(p),E=t("../components/list"),_=r(E),m=t("../components/list-row"),y=r(m),v=t("../components/image-card-view"),g=r(v),b=t("../components/message"),S=r(b),R=t("../partials/toggle-assistant-button"),N=r(R),k=t("../helpers/Session"),w=r(k),T=t("../i18n"),O=r(T),I=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.request=null,n.state={loading:!0,broadcasts:[]},n.onItemClick=n.onItemClick.bind(n),n.renderAction=n.renderAction.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){null!=this.request&&this.request.abort()}},{key:"loadData",value:function(){var e=this;null!=this.request&&this.request.abort(),this.setState({loading:!0,broadcasts:[]}),this.request=new RequestJS({url:h["default"].host+"/api/v2/genres/"+this.props.genreId+"/broadcasts.json",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,broadcasts:t.data.broadcasts})},error:function(t){e.request.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.request.send()}},{key:"onItemClick",value:function(e){e.__type__&&"action"==e.__type__||mediator.publish("open","Broadcast",{id:e.id})}},{key:"renderItem",value:function(e){var t=[e.starts_at.format("HH:mm"),e.subtitle].filter(function(e){return null!=e});return l["default"].createElement(g["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:h["default"].getImage(e.image,300).url})}},{key:"renderAction",value:function(e){return l["default"].createElement(N["default"],{key:e.id,bindSelf:!0,type:"genre",focused:!1,typeId:this.props.genreId})}},{key:"render",value:function(){if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});if(this.state.broadcasts.length>0){var e=[l["default"].createElement(y["default"],{title:O["default"].t("VIEWS_GENRE_ALL"),key:"all",renderItem:this.renderItem},this.state.broadcasts)];return w["default"].isSignedIn()&&e.push(l["default"].createElement(y["default"],{title:O["default"].t("VIEWS_GENRE_BROADCASTS_ACTIONS"),key:"actions",renderItem:this.renderAction},[{__type__:"action",id:"record-genre"}])),l["default"].createElement(_["default"],{focused:this.props.isFocused,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},e)}return l["default"].createElement(S["default"],{centerInScreen:!0,text:O["default"].t("VIEWS_GENRE_BROADCASTS_EMPTY")})}}]),t}(l["default"].Component);e["default"]=I}),require.register("views/genres.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("react"),c=r(l),d=t("../components/loading-spinner"),f=r(d),p=t("../helpers/TVKey"),h=(r(p),t("../helpers/YouTV")),E=r(h),_=t("../components/list"),m=r(_),y=t("../components/list-row"),v=r(y),g=t("../components/image-card-view"),b=r(g),S=t("../i18n"),R=r(S),N=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,genres:[]},n.request=null,n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.loadData(),"undefined"!=typeof analytics&&analytics.screenView("Genres")}},{key:"componentWillUnmount",value:function(){null!=this.request&&this.request.abort()}},{key:"loadData",value:function(){var e=this;this.request=new RequestJS({url:E["default"].host+"/api/v2/genres.json",reviver:E["default"].reviver,success:function(t){e.setState({loading:!1,genres:t.data.genres})},error:function(t){e.request.canceled||(e.setState({loading:!1}),E["default"].handleError(t))}}),this.request.send()}},{key:"onItemClick",value:function(e){mediator.publish("open","GenreBroadcasts",{genreId:e.id})}},{key:"renderItem",value:function(e){var t=e.genres?R["default"].t("VIEWS_GENRE_ALL"):R["default"].t("GENRE_"+e.id,{fallback:e.name});return c["default"].createElement(b["default"],{className:"card-view-genre",key:e.id,title:t,image:"https://image.youtv.de/tv-bilder/normal/thumb/"+e.image_id+".jpg"})}},{key:"render",value:function(){var e=this;if(this.state.loading)return c["default"].createElement(f["default"],{centerInScreen:!0});var t=this.state.genres.map(function(t){return c["default"].createElement(v["default"],{title:R["default"].t("GENRE_"+t.id,{fallback:t.name}),key:"row-"+t.id,renderItem:e.renderItem},[t].concat(o(t.genres)))});return c["default"].createElement(m["default"],{focused:this.props.isFocused,itemWidth:"170",itemHeight:"210",onItemClick:this.onItemClick},t)}}]),t}(c["default"].Component);e["default"]=N}),require.register("views/login.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("react-dom"),d=r(c),f=t("../helpers/TVKey"),p=r(f),h=t("../helpers/Session"),E=r(h),_=t("../helpers/YouTV"),m=r(_),y=t("../i18n"),v=r(y),g=function(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={focused:0},n.focusableElements=3,n.focusMapping=["email","password","submit"],n.onKeyDown=n.onKeyDown.bind(n),n.onInputKeyDown=n.onInputKeyDown.bind(n),n.request=null,n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.request&&this.request.abort()}},{key:"componentDidMount",value:function(){d["default"].findDOMNode(this.refs.email).focus()}},{key:"componentDidUpdate",value:function(e,t){if(t.focused!=this.state.focused){var n=this.refs[this.focusMapping[this.state.focused]];"INPUT"==n.tagName&&n.focus()}}},{key:"onSubmit",value:function(e){var t=this;e&&e.preventDefault(),this.request=new RequestJS({url:m["default"].host+"/api/v2/auth_token.json",method:"POST",data:{auth_token:{email:this.refs.email.value,password:this.refs.password.value}},success:function(e){E["default"].setToken(e.data.token),mediator.publish("return")},error:function(e){t.request.canceled||m["default"].handleError(e)}}),this.request.send()}},{key:"onKeyDown",value:function(e,t){switch(e){case p["default"].KEY_ENTER:t.stopPropagation();var n=this.refs[this.focusMapping[this.state.focused]];"INPUT"==n.tagName?n.focus():this.onSubmit();break;case p["default"].KEY_UP:this.state.focused>0&&(t.stopPropagation(),this.setState({focused:this.state.focused-1}));break;case p["default"].KEY_DOWN:this.state.focused<this.focusableElements-1&&(t.stopPropagation(),this.setState({focused:this.state.focused+1}))}}},{key:"onInputKeyDown",value:function(e){var t=e.keyCode||e.which;switch(t){case p["default"].KEY_DOWN:case p["default"].KEY_RETURN:case p["default"].KEY_CANCEL:case p["default"].KEY_UP:case 27:case 461:e.preventDefault(),document.activeElement.blur(),this.onKeyDown(t,e);break;case p["default"].KEY_ENTER:case p["default"].KEY_DONE:e.preventDefault(),document.activeElement.blur();break;case p["default"].KEY_LEFT:0==g(e.target)&&(e.preventDefault(),document.activeElement.blur(),mediator.publish("keydown",t))}}},{key:"render",value:function(){return l["default"].createElement("div",{className:"row"},l["default"].createElement("form",{className:"col",onSubmit:this.onSubmit.bind(this)},l["default"].createElement("p",null,l["default"].createElement("label",null,v["default"].t("VIEWS_LOGIN_MAIL")),l["default"].createElement("input",{ref:"email",autoComplete:"off",className:0==this.state.focused?"focused":"",type:"text",name:"email",placeholder:v["default"].t("VIEWS_LOGIN_MAIL"),onKeyDown:this.onInputKeyDown})),l["default"].createElement("p",null,l["default"].createElement("label",null,v["default"].t("VIEWS_LOGIN_PASSWORD")),l["default"].createElement("input",{ref:"password",autoComplete:"off",className:1==this.state.focused?"focused":"",type:"password",name:"password",placeholder:v["default"].t("VIEWS_LOGIN_PASSWORD"),onKeyDown:this.onInputKeyDown})),l["default"].createElement("button",{ref:"submit",type:"submit",className:2==this.state.focused?"focused":""},v["default"].t("VIEWS_LOGIN_SUBMIT"))),l["default"].createElement("div",{className:"col"},l["default"].createElement("h2",null,v["default"].t("VIEWS_LOGIN_DESCRIPTON_PART_1")),l["default"].createElement("p",null,v["default"].t("VIEWS_LOGIN_DESCRIPTON_PART_2")),l["default"].createElement("p",null,v["default"].t("VIEWS_LOGIN_DESCRIPTON_PART_3"))))}}]),t}(l["default"].Component);e["default"]=b}),require.register("views/mediacenter.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/TVKey"),p=(r(f),t("../helpers/YouTV")),h=r(p),E=t("../components/list"),_=r(E),m=t("../components/list-row"),y=r(m),v=t("../components/image-card-view"),g=r(v),b=t("../i18n"),S=r(b),R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,filters:[],blockbuster:[],mostViewed:[]},n.requestFilters=null,n.requestBlockbuster=null,n.requestMostViewed=null,n.renderFilter=n.renderFilter.bind(n),n.renderBroadcast=n.renderBroadcast.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this.loadData(),"undefined"!=typeof analytics&&analytics.screenView("TV Entdecken")}},{key:"componentWillUnmount",value:function(){null!=this.requestBlockbuster&&this.requestBlockbuster.abort(),null!=this.requestMostViewed&&this.requestMostViewed.abort(),null!=this.requestFilters&&this.requestFilters.abort()}},{key:"loadData",value:function(){var e=this;this.requestBlockbuster=new RequestJS({url:h["default"].host+"/api/v2/filters/blockbuster/broadcasts.json?per_page=24",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,blockbuster:t.data.broadcasts})},error:function(t){e.requestBlockbuster.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.requestMostViewed=new RequestJS({url:h["default"].host+"/api/v2/filters/most-recordings/broadcasts.json?per_page=24",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,mostViewed:t.data.broadcasts})},error:function(t){e.requestMostViewed.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.requestFilters=new RequestJS({url:h["default"].host+"/api/v2/filters.json",reviver:h["default"].reviver,success:function(t){e.setState({loading:!1,filters:t.data.filters.map(function(e){return Object.assign(e,{__type__:"filter"})})})},error:function(t){e.requestFilters.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.requestBlockbuster.send(),this.requestMostViewed.send(),this.requestFilters.send()}},{key:"onItemClick",value:function(e){e.__type__&&"filter"==e.__type__?mediator.publish("open","FilterBroadcasts",{filterId:e.id}):mediator.publish("open","Broadcast",{id:e.id})}},{key:"renderFilter",value:function(e){return l["default"].createElement(g["default"],{key:e.id,title:S["default"].t("FILTER_"+e.uid,{fallback:e.name}),subtitle:S["default"].t("VIEWS_MEDIACENTER_SHOW_ALL"),image:h["default"].getImage(e.image,330).url})}},{key:"renderBroadcast",value:function(e){var t=[e.subtitle,e.starts_at.format("DD.MM HH:mm"),e.channel_name].filter(function(e){return null!=e});return l["default"].createElement(g["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:h["default"].getImage(e.image,330).url})}},{key:"render",value:function(){if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});var e=[l["default"].createElement(y["default"],{title:S["default"].t("VIEWS_MEDIACENTER_TOP"),key:"filters",renderItem:this.renderFilter},this.state.filters),l["default"].createElement(y["default"],{title:S["default"].t("VIEWS_MEDIACENTER_BLOCKBUSTER"),key:"blockbuster",renderItem:this.renderBroadcast},this.state.blockbuster),l["default"].createElement(y["default"],{title:S["default"].t("VIEWS_MEDIACENTER_POPULAR"),key:"most-viewed",renderItem:this.renderBroadcast},this.state.mostViewed)];return l["default"].createElement(_["default"],{focused:this.props.isFocused,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},e.filter(function(e){return e.props.children.length>0}))}}]),t}(l["default"].Component);e["default"]=R}),require.register("views/player.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("./video-player/video-player-samsung"),d=r(c),f=t("./video-player/video-player-html5"),p=r(f),h=t("./video-player/video-player-avplay"),E=r(h),_=t("../helpers/TVKey"),m=r(_),y=t("../i18n"),v=r(y),g=t("../components/loading-spinner"),b=r(g),S=t("helpers/KVStore"),R=r(S),N=t("../helpers/YouTV"),k=r(N),w=t("../helpers/Session"),T=r(w),O=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=R["default"].getItem("player-quality"),s=R["default"].getItem("player-captions");return n.QUALITIES={AD:0,NQ:1,HQ:2,HD:3},n.state={source:n.getSourceByQuality(r||n.QUALITIES.HD),totalTime:0,currentTime:0,buffering:!0,playing:!1,captionsShowing:s||"hidden"},n.FOCUS_BUTTONS=0,n.FOCUS_PROGRESS=1,n.FOCUS_SKIP_BUTTON=3,n.DEFAULT_FOCUS_BUTTON=1,n.HIDE_CONTROLS_TIMEOUT=5e3,n.skipForward=6e4,n.skipBackward=3e4,n.connectivityServiceInterval=null,n.connectivityRetries=0,n.skipSeconds=0,n.controlsTimer=null,n.progressFocused=!1,n.focusedButton=1,n.skipButtonFocused=!1,n.ads=null,n.playerReady=!1,n.resumeTime=0,n.onKeyDown=n.onKeyDown.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.player=[E["default"],d["default"],p["default"]].find(function(e){return e.isSupported()}),n.checkAds=n.checkAds.bind(n),n.loadAds=n.loadAds.bind(n),n.removeSkipButton=n.removeSkipButton.bind(n),n}return s(t,e),a(t,null,[{key:"fullScreen",value:function(){return!0}}]),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown),mediator.subscribe("mousemove",this.onMouseMove)}},{key:"componentDidMount",value:function(){this.refs.player.load(this.state.source.file),this.toggleCaptions(this.state.captionsShowing),this.loadAds(),this.startConnectivityService(),this.setFocus(this.FOCUS_BUTTONS)}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),mediator.remove("mousemove",this.onMouseMove),"function"==typeof this.props.onExit&&this.props.onExit(this.refs.player.currentTime),this.stopConnectivityService(),this.refs.player.stop(),null!=this.controlsTimer&&clearTimeout(this.controlsTimer),null!=this.adsRequest&&this.adsRequest.abort()}},{key:"componentDidUpdate",value:function(e,t){this.state.source.file!=t.source.file&&this.refs.player.load(this.state.source.file)}},{key:"startConnectivityService",value:function(){this.connectivityServiceInterval=setInterval(this.checkConnectivityService.bind(this),1e4)}},{key:"stopConnectivityService",value:function(){null!=this.connectivityServiceInterval&&clearTimeout(this.connectivityServiceInterval),null!=this.connectivityServiceRequest&&this.connectivityServiceRequest.abort()}},{key:"checkConnectivityService",value:function(){var e=this;this.connectivityServiceRequest=new RequestJS({url:"https://tv.youtv.de/connectivity.json?v="+(new Date).getTime(),success:function(t){e.connectivityRetries=0},error:function(){e.connectivityServiceRequest.canceled||(e.connectivityRetries=e.connectivityRetries+1,e.connectivityRetries>=2&&(e.onConnectivityError(),e.connectivityRetries=0))}}),this.connectivityServiceRequest.send()}},{key:"loadAds",value:function(){var e=this;this.adsRequest=new RequestJS({url:k["default"].host+"/api/v2/broadcasts/"+this.props.id+"/skips.json",reviver:k["default"].reviver,before:function(e){T["default"].setHeader(e)},success:function(t){e.ads=t.data.skips.map(function(e){return[e.from,e.to]})}}),this.adsRequest.send()}},{key:"checkAds",value:function(e){if(null!=this.ads){var t=e/1e3,n=this.ads.find(function(e){return t>=e[0]&&t<=e[1]-25});if(null!=n){if(this.state.currentAd==n||null!=this.state.currentAd)return;this.setState({currentAd:n}),this.showControls()}else this.removeSkipButton()}}},{key:"skip",value:function(){null!=this.state.currentAd&&(this.skipTo(1e3*this.state.currentAd[1]),this.removeSkipButton())}},{key:"removeSkipButton",value:function(){this.setState({currentAd:null}),this.skipButtonFocused&&this.setFocus(this.FOCUS_BUTTONS)}},{key:"onKeyDown",value:function(e,t){var n=this;switch(e){case m["default"].KEY_ENTER:t.stopPropagation(),this.showControlsWrapper(function(){n.progressFocused?(n.skipTo(n.skipSeconds),n.setFocus(n.FOCUS_BUTTONS)):n.onButtonClick()});break;case m["default"].KEY_LEFT:t.stopPropagation(),this.showControlsWrapper(function(){if(n.progressFocused){var e=n.skipSeconds-n.skipBackward;n.drawProgress(Math.max(0,e))}else n.focusedButton>0&&n.setButtonFocus(n.focusedButton-1)});break;case m["default"].KEY_RIGHT:t.stopPropagation(),this.showControlsWrapper(function(){if(n.progressFocused){var e=n.skipSeconds+n.skipForward;n.drawProgress(Math.min(n.state.totalTime,e))}else n.focusedButton<n.getButtonCount()-1&&n.setButtonFocus(n.focusedButton+1)});break;case m["default"].KEY_UP:t.stopPropagation(),this.showControlsWrapper(function(){n.progressFocused?n.setFocus(n.FOCUS_BUTTONS):n.focusedButton>-1&&null!=n.state.currentAd&&n.setFocus(n.FOCUS_SKIP_BUTTON)});break;case m["default"].KEY_DOWN:t.stopPropagation(),this.showControlsWrapper(function(){n.skipButtonFocused?n.setFocus(n.FOCUS_BUTTONS):!n.progressFocused&&n.playerReady&&n.setFocus(n.FOCUS_PROGRESS)});break;case m["default"].KEY_RED:case 65:t.stopPropagation(),this.changeQuality(this.QUALITIES.AD);break;case m["default"].KEY_GREEN:case 66:t.stopPropagation(),this.changeQuality(this.QUALITIES.NQ);break;case m["default"].KEY_YELLOW:case 67:t.stopPropagation(),this.changeQuality(this.QUALITIES.HQ);break;case m["default"].KEY_BLUE:case 68:t.stopPropagation(),this.changeQuality(this.QUALITIES.HD);break;case m["default"].KEY_RW:t.stopPropagation(),this.showControlsWrapper(function(){n.rewind()});break;case m["default"].KEY_PAUSE:t.stopPropagation(),this.showControlsWrapper(function(){n.refs.player.pause()});break;case m["default"].KEY_FF:t.stopPropagation(),this.showControlsWrapper(function(){n.forward()});break;case m["default"].KEY_PLAY:t.stopPropagation(),this.showControlsWrapper(function(){n.refs.player.play()});break;case 10252:t.stopPropagation(),this.showControlsWrapper(function(){n.refs.player.togglePlayPause()});break;case m["default"].KEY_STOP:t.stopPropagation(),mediator.publish("return");break;case m["default"].KEY_CH_UP:case m["default"].KEY_CH_DOWN:"function"==typeof this.refs.player.switchMode&&(t.stopPropagation(),this.refs.player.switchMode())}}},{key:"onMouseMove",value:function(){this.showControls()}},{key:"onMetadataLoaded",value:function(){var e=this;this.playerReady=!0,this.setState({totalTime:this.refs.player.duration},function(){e.resumeTime>0?e.refs.player.skipTo(e.resumeTime):e.refs.player.skipTo(1e3*e.props.startTime)})}},{key:"onCurrentTimeChange",value:function(){this.progressFocused||this.setState({currentTime:this.refs.player.currentTime}),this.checkAds(this.state.currentTime)}},{key:"onPlayStateChange",value:function(){this.setState({playing:this.refs.player.playing}),this.showControls()}},{key:"onEnded",value:function(){mediator.publish("return")}},{key:"onError",value:function(e){e&&e.code==e.MEDIA_ERR_NETWORK&&onConnectivityError()}},{key:"onConnectivityError",value:function(){mediator.publish("return"),mediator.publish("notification","error",v["default"].t("GLOBAL_NO_CONNECTION"))}},{key:"onBufferingChange",value:function(){this.setState({buffering:this.refs.player.buffering})}},{key:"secondsToTime",value:function(e){var t=e/1e3,n=Math.floor(t/3600),r=Math.floor(t/60%60),o=Math.floor(t%60);return("0"+n).slice(-2)+":"+("0"+r).slice(-2)+":"+("0"+o).slice(-2)}},{key:"getButtonCount",value:function(){return this.props.captionUrl&&this.player.supportsCaptions()?5:4}},{key:"getPercentForSeconds",value:function(e){var t=0;return e>0&&(t=100*e/this.refs.player.duration),t}},{key:"getSourceByQuality",value:function(e){var t=this;if(0==this.props.files.length)return null;var n=this.props.files.slice(0);n.sort(function(e,n){return t.QUALITIES[e.quality.toUpperCase()]<t.QUALITIES[n.quality.toUpperCase()]?1:-1});for(var r=0;r<n.length;r++)if(this.QUALITIES[n[r].quality.toUpperCase()]<=e)return n[r];return n[n.length-1]}},{key:"setFocus",value:function(e){switch(e){case this.FOCUS_BUTTONS:this.setSkipButtonFocus(!1),this.setProgressFocus(!1),this.setButtonFocus(this.DEFAULT_FOCUS_BUTTON);break;case this.FOCUS_PROGRESS:this.setSkipButtonFocus(!1),this.setButtonFocus(-1),this.setProgressFocus(!0),this.drawProgress();break;case this.FOCUS_SKIP_BUTTON:this.setButtonFocus(-1),this.setSkipButtonFocus(!0),this.setProgressFocus(!1)}}},{key:"setProgressFocus",value:function(e){this.progressFocused=e,this.refs.controlsProgress&&(e?this.refs.controlsProgress.classList.add("focused"):this.refs.controlsProgress.classList.remove("focused"))}},{key:"setSkipButtonFocus",value:function(e){this.skipButtonFocused=e,this.refs.controlsSkipButton&&(e?this.refs.controlsSkipButton.classList.add("focused"):this.refs.controlsSkipButton.classList.remove("focused"))}},{key:"setButtonFocus",value:function(e){this.focusedButton>-1&&this.refs.controlsButtons.querySelector("[tabindex='"+this.focusedButton+"']").classList.remove("focused"),this.focusedButton=e,this.focusedButton>-1&&this.refs.controlsButtons.querySelector("[tabindex='"+this.focusedButton+"']").classList.add("focused")}},{key:"drawProgress",value:function(e){this.skipSeconds=e||this.state.currentTime,this.refs.timeElapsed.textContent=this.secondsToTime(this.skipSeconds);var t=parseInt(this.refs.controlsProgress.offsetWidth,10),n=t/100*this.getPercentForSeconds(this.skipSeconds);this.refs.progressSkip.style.left=n+"px"}},{key:"onButtonClick",value:function(e){var t=this.focusedButton;if("undefined"!=typeof e&&(t=parseInt(e.target.tabIndex,10)),this.skipButtonFocused)return void this.skip();switch(t){case 0:this.rewind();break;case 1:this.togglePlayPause();break;case 2:mediator.publish("return");break;case 3:this.forward();break;case 4:this.toggleCaptions()}}},{key:"rewind",value:function(){this.refs.player.jumpBackward(this.skipBackward)}},{key:"forward",value:function(){this.refs.player.jumpForward(this.skipForward)}},{key:"skipTo",value:function(e){this.refs.player.skipTo(e)}},{key:"togglePlayPause",value:function(){this.refs.player.paused?this.refs.player.play():this.refs.player.pause()}},{key:"toggleCaptions",value:function(e){var t=this.refs.player.toggleCaptions(e);null!=t&&(R["default"].setItem("player-captions",t),this.setState({captionsShowing:t}))}},{key:"changeQuality",value:function(e){var t=this;R["default"].setItem("player-quality",e);var n=this.props.files.some(function(n){return t.QUALITIES[n.quality.toUpperCase()]==e});if(n){var r=this.getSourceByQuality(e);this.state.source.file!=r.file&&(this.showControls(),this.resumeTime=this.refs.player.currentTime,this.refs.player.pause(),this.playerReady=!1,this.setState({source:r}))}}},{key:"isControlsHidden",value:function(){return this.refs.controls.classList.contains("hidden")}},{key:"showControlsWrapper",value:function(e){this.isControlsHidden()||e(),this.showControls()}},{key:"showControls",value:function(){var e=this;null!=this.refs.controls&&(this.refs.controls.classList.remove("hidden"),clearTimeout(this.controlsTimer),0==this.refs.player.paused&&(this.controlsTimer=setTimeout(function(){e.hideControls()},this.HIDE_CONTROLS_TIMEOUT)))}},{key:"hideControls",value:function(){this.refs.controls.classList.add("hidden")}},{key:"render",value:function(){var e=this,t={width:this.getPercentForSeconds(this.state.currentTime)+"%"},n="button-play";this.state.playing&&(n+=" playing"),1==this.focusedButton&&(n+=" focused");var r="button-captions";4==this.focusedButton&&(r+=" focused"),"showing"==this.state.captionsShowing&&(r+=" active");for(var o=[],i=function(t){var n=Object.keys(e.QUALITIES)[t],r=e.props.files.find(function(e){return n==e.quality.toUpperCase()});return r?void o.push(l["default"].createElement("li",{key:"quality-"+n,onClick:e.changeQuality.bind(e,e.QUALITIES[n]),"data-quality":n.toLowerCase()},n)):"continue"},s=0;s<Object.keys(this.QUALITIES).length;s++){i(s)}var a=!this.playerReady||this.state.source.file.indexOf(".m4a")>-1?this.props.poster:null,u={};return null!=a&&(u.backgroundImage="url('"+a+"')"),l["default"].createElement("div",{className:"player-poster",style:u},l["default"].createElement(this.player,{ref:"player",onEnded:this.onEnded.bind(this),onError:this.onError.bind(this),poster:a,captionUrl:this.props.captionUrl,id:this.props.id,onCurrentTimeChange:this.onCurrentTimeChange.bind(this),onMetadataLoaded:this.onMetadataLoaded.bind(this),onBufferingChange:this.onBufferingChange.bind(this),onPlayStateChange:this.onPlayStateChange.bind(this)}),l["default"].createElement("div",{ref:"controls",className:"controls"},null!=this.state.currentAd&&l["default"].createElement("button",{ref:"controlsSkipButton",className:"controls-buttons-skip",onClick:this.skip.bind(this)},v["default"].t("VIEWS_PLAYER_SKIP_AD")),l["default"].createElement("div",{ref:"controlsButtons",className:"controls-buttons"},l["default"].createElement("button",{onClick:this.onButtonClick.bind(this),className:"button-rewind",tabIndex:"0"},"Rewind"),l["default"].createElement("button",{onClick:this.onButtonClick.bind(this),className:n,tabIndex:"1"},"Play"),l["default"].createElement("button",{onClick:this.onButtonClick.bind(this),className:"button-stop",tabIndex:"2"},"Stop"),l["default"].createElement("button",{onClick:this.onButtonClick.bind(this),className:"button-forward",tabIndex:"3"},"Forward"),this.props.captionUrl&&this.player.supportsCaptions()&&l["default"].createElement("button",{onClick:this.onButtonClick.bind(this),className:r,tabIndex:"4"},"Captions")),l["default"].createElement("div",{ref:"controlsProgress",className:"controls-progress"},l["default"].createElement("div",{ref:"progressBar",className:"controls-progress-bar",style:t}),l["default"].createElement("div",{ref:"progressSkip",className:"controls-progress-skip"})),l["default"].createElement("div",{className:"controls-times"},l["default"].createElement("div",{ref:"timeElapsed",className:"controls-times-elapsed"},this.secondsToTime(this.state.currentTime)),l["default"].createElement("div",{className:"controls-times-total"},this.secondsToTime(this.state.totalTime))),l["default"].createElement("ul",{className:"controls-qualities"},o)),this.state.buffering&&l["default"].createElement(b["default"],{centerInScreen:!0}))}}]),t}(l["default"].Component);e["default"]=O}),require.register("views/recordings.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("../components/loading-spinner"),d=r(c),f=t("../helpers/TVKey"),p=(r(f),t("../helpers/YouTV")),h=r(p),E=t("../helpers/Session"),_=r(E),m=t("../components/list"),y=r(m),v=t("../components/list-row"),g=r(v),b=t("../components/image-card-view"),S=r(b),R=t("../components/message"),N=r(R),k=t("../i18n"),w=r(k),T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,collections:[],recordings:[]},n.collectionRequest=null,n.recordingsRequest=null,n.onSessionChange=n.onSessionChange.bind(n),n.renderRecording=n.renderRecording.bind(n),n.renderCollection=n.renderCollection.bind(n),n}return s(t,e),a(t,[{key:"loadCollections",value:function(){var e=this;this.collectionRequest=new RequestJS({url:h["default"].host+"/api/v2/recording_collections.json",reviver:h["default"].reviver,before:function(e){_["default"].setHeader(e)},success:function(t){e.setState({loading:!1,collections:t.data.recording_collections.map(function(e){return e.__type__="collection",e})})},error:function(t){e.collectionRequest.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.collectionRequest.send()}},{key:"loadRecordings",value:function(){var e=this;this.recordingsRequest=new RequestJS({url:h["default"].host+"/api/v2/recordings.json?status[]=recorded&status[]=archived&per_page=50",reviver:h["default"].reviver,before:function(e){_["default"].setHeader(e)},success:function(t){e.setState({loading:!1,recordings:t.data.recordings.map(function(e){return e.__type__="recording",e}).sort(function(e,t){return e.starts_at.isAfter(t.starts_at)?-1:1})})},error:function(t){e.recordingsRequest.canceled||(e.setState({loading:!1}),h["default"].handleError(t))}}),this.recordingsRequest.send()}},{key:"componentDidMount",value:function(){_["default"].isSignedIn()&&(this.loadCollections(),this.loadRecordings()),"undefined"!=typeof analytics&&analytics.screenView("Aufnahme-Assistenten"),mediator.subscribe("sessionChange",this.onSessionChange)}},{key:"componentWillUnmount",value:function(){null!=this.collectionRequest&&this.collectionRequest.abort(),null!=this.recordingsRequest&&this.recordingsRequest.abort(),mediator.remove("sessionChange",this.onSessionChange)}},{key:"onSessionChange",value:function(){this.forceUpdate()}},{key:"onItemClick",value:function(e){"recording"==e.__type__?mediator.publish("open","Broadcast",{id:e.id}):mediator.publish("open","Collection",{id:e.id})}},{key:"renderRecording",value:function(e){var t=[e.subtitle,e.starts_at.format("DD.MM HH:mm"),e.channel_name].filter(function(e){return null!=e});return l["default"].createElement(S["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:h["default"].getImage(e.image,330).url})}},{key:"renderCollection",value:function(e){return l["default"].createElement(S["default"],{key:e.id,title:e.title,subtitle:e.subtitle,image:h["default"].getImage(e.image,330).url})}},{key:"render",value:function(){if(!_["default"].isSignedIn())return l["default"].createElement(N["default"],{text:w["default"].t("GLOBAL_NOT_SIGNED_IN"),centerInScreen:!0});if(this.state.loading)return l["default"].createElement(d["default"],{centerInScreen:!0});var e=[l["default"].createElement(g["default"],{title:w["default"].t("VIEWS_RECORDINGS_LAST_RECORDINGS"),key:"recordings",renderItem:this.renderRecording},this.state.recordings),l["default"].createElement(g["default"],{title:w["default"].t("VIEWS_RECORDINGS_COLLECTIONS"),key:"collections",renderItem:this.renderCollection},this.state.collections)];return l["default"].createElement(y["default"],{focused:this.props.isFocused,itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},e.filter(function(e){return e.props.children.length>0}))}}]),t}(l["default"].Component);e["default"]=T}),require.register("views/search.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=t("react-dom"),d=r(c),f=t("../helpers/TVKey"),p=r(f),h=t("../helpers/YouTV"),E=r(h),_=t("../helpers/Session"),m=r(_),y=t("../components/loading-spinner"),v=r(y),g=t("../components/list"),b=r(g),S=t("../components/list-row"),R=r(S),N=t("../components/image-card-view"),k=r(N),w=t("../components/message"),T=r(w),O=t("../i18n"),I=r(O),C=function(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign({broadcastsLoading:!1,recordingsLoading:!1,broadcasts:[],recordings:[],searchTerm:"",searchExecuted:!1},e),n.onKeyDown=n.onKeyDown.bind(n),n.onInputKeyDown=n.onInputKeyDown.bind(n),n.onSearchChange=n.onSearchChange.bind(n),n.broadcastsRequest=null,n.recordingsRequest=null,n}return s(t,e),a(t,[{key:"componentWillMount",value:function(){mediator.subscribe("keydown",this.onKeyDown)}},{key:"serialize",value:function(){return this.state}},{key:"componentWillUnmount",value:function(){mediator.remove("keydown",this.onKeyDown),null!=this.broadcastsRequest&&this.broadcastsRequest.abort(),null!=this.recordingsRequest&&this.recordingsRequest.abort()}},{key:"componentDidMount",value:function(){""==this.state.searchTerm&&this.refs.search.focus(),"undefined"!=typeof analytics&&analytics.screenView("Suche")}},{key:"componentWillUpdate",value:function(e,t){"undefined"==typeof this.refs.list&&1==e.isFocused&&0==this.props.isFocused&&this.focusSearch()}},{key:"focusSearch",value:function(){this.refs.search.focus(),this.forceUpdate()}},{key:"blurSearch",value:function(){document.activeElement.blur(),this.forceUpdate()}},{key:"onKeyDown",value:function(e,t){switch(e){
case p["default"].KEY_UP:document.activeElement!==d["default"].findDOMNode(this.refs.search)&&(t.stopPropagation(),this.focusSearch());break;case p["default"].KEY_DOWN:document.activeElement===d["default"].findDOMNode(this.refs.search)&&(t.stopPropagation(),this.blurSearch())}}},{key:"onInputKeyDown",value:function(e){var t=e.keyCode||e.which;switch(t){case p["default"].KEY_DOWN:e.preventDefault(),"undefined"!=typeof this.refs.list&&this.blurSearch();break;case p["default"].KEY_ENTER:case p["default"].KEY_DONE:e.preventDefault(),this.search();break;case p["default"].KEY_LEFT:0==C(e.target)&&(e.preventDefault(),this.blurSearch(),mediator.publish("keydown",t));break;case p["default"].KEY_RETURN:case p["default"].KEY_CANCEL:case 27:case 461:e.preventDefault(),this.blurSearch(),mediator.publish("keydown",p["default"].KEY_LEFT)}}},{key:"search",value:function(){var e=this;this.setState({broadcastsLoading:!0,recordingsLoading:!0,searchExecuted:!0}),null!=this.broadcastsRequest&&this.broadcastsRequest.abort(),null!=this.recordingsRequest&&this.recordingsRequest.abort(),this.broadcastsRequest=new RequestJS({url:E["default"].host+"/api/v2/broadcasts/search.json?title="+this.refs.search.value,reviver:E["default"].reviver,success:function(t){e.setState({broadcastsLoading:!1,broadcasts:t.data.broadcasts})},error:function(t){e.broadcastsRequest.canceled||(e.setState({broadcastsLoading:!1}),E["default"].handleError(t))}}),this.recordingsRequest=new RequestJS({url:E["default"].host+"/api/v2/recordings/search.json?title="+this.refs.search.value,reviver:E["default"].reviver,before:function(e){m["default"].setHeader(e)},success:function(t){e.setState({recordingsLoading:!1,recordings:t.data.broadcasts})},error:function(t){e.recordingsRequest.canceled||(e.setState({recordingsLoading:!1}),E["default"].handleError(t))}}),m["default"].isSignedIn()&&this.recordingsRequest.send(),this.broadcastsRequest.send()}},{key:"renderItem",value:function(e){var t=[e.subtitle,e.starts_at.format("DD.MM HH:mm"),e.channel_name].filter(function(e){return null!=e});return l["default"].createElement(k["default"],{key:e.id,title:e.title,subtitle:t.join(", "),image:E["default"].getImage(e.image,330).url})}},{key:"onItemClick",value:function(e){mediator.publish("open","Broadcast",{id:e.id})}},{key:"onSearchChange",value:function(e){this.setState({searchTerm:e.target.value},this.search)}},{key:"render",value:function(){var e=void 0;if(this.state.broadcastsLoading||m["default"].isSignedIn()&&this.state.recordingsLoading)e=l["default"].createElement(v["default"],{centerInScreen:!0});else if(this.state.broadcasts.length>0||this.state.recordings.length>0){var t=[l["default"].createElement(R["default"],{key:"tv-guide",title:I["default"].t("VIEWS_SEARCH_TV_GUIDE"),renderItem:this.renderItem},this.state.broadcasts),l["default"].createElement(R["default"],{key:"recordings",title:I["default"].t("VIEWS_SEARCH_RECORDINGS"),renderItem:this.renderItem},this.state.recordings)];e=l["default"].createElement(b["default"],{ref:"list",focused:this.props.isFocused&&document.activeElement!==d["default"].findDOMNode(this.refs.search),itemWidth:"300",itemHeight:"230",onItemClick:this.onItemClick},t.filter(function(e){return e.props.children.length>0}))}else this.state.searchExecuted&&(e=l["default"].createElement(T["default"],{text:I["default"].t("VIEWS_SEARCH_NO_RESULTS"),centerInScreen:!0}));return l["default"].createElement("div",{className:"search-wrapper"},l["default"].createElement("input",{type:"search",autoComplete:"off",ref:"search",placeholder:I["default"].t("VIEWS_SEARCH_HINT"),className:"search-wrapper-input",value:this.state.searchTerm,onChange:this.onSearchChange,onKeyDown:this.onInputKeyDown}),l["default"].createElement("div",{className:"search-wrapper-content"},e))}}]),t}(l["default"].Component);e["default"]=A}),require.register("views/video-player/base-video-player.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={totalTime:0,currentTime:0,buffering:!0,playing:!1},n}return s(t,e),a(t,null,[{key:"isSupported",value:function(){return!1}},{key:"supportsCaptions",value:function(){return!1}}]),a(t,[{key:"componentDidUpdate",value:function(e,t){this.state.currentTime!=t.currentTime&&"function"==typeof this.props.onCurrentTimeChange&&this.props.onCurrentTimeChange(),this.state.buffering!=t.buffering&&"function"==typeof this.props.onBufferingChange&&this.props.onBufferingChange(),this.state.totalTime!=t.totalTime&&"function"==typeof this.props.onMetadataLoaded&&this.props.onMetadataLoaded(),this.state.playing!=t.playing&&"function"==typeof this.props.onPlayStateChange&&this.props.onPlayStateChange()}},{key:"load",value:function(e){this.setState({totalTime:0,currentTime:0,buffering:!0})}},{key:"play",value:function(){throw"Not implemented"}},{key:"pause",value:function(){throw"Not implemented"}},{key:"stop",value:function(){throw"Not implemented"}},{key:"toggleCaptions",value:function(){throw"Not implemented"}},{key:"togglePlayPause",value:function(){this.state.playing?this.pause():this.play()}},{key:"skipTo",value:function(e){throw"Not implemented"}},{key:"jumpForward",value:function(e){throw"Not implemented"}},{key:"jumpBackward",value:function(e){throw"Not implemented"}},{key:"onStreamingCompleted",value:function(){"function"==typeof this.props.onEnded&&this.props.onEnded()}},{key:"currentTime",get:function(){return this.state.currentTime}},{key:"duration",get:function(){return this.state.totalTime}},{key:"playing",get:function(){return this.state.playing}},{key:"paused",get:function(){return!this.state.playing}},{key:"buffering",get:function(){return this.state.buffering}}]),t}(l["default"].Component);e["default"]=c}),require.register("views/video-player/video-player-avplay.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("react"),c=r(l),d=t("./base-video-player"),f=r(d),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.displayModes=["PLAYER_DISPLAY_MODE_FULL_SCREEN","PLAYER_DISPLAY_MODE_LETTER_BOX","PLAYER_DISPLAY_MODE_CROPPED_FULL"],n.displayMode=0,n}return s(t,e),u(t,null,[{key:"isSupported",value:function(){return"undefined"!=typeof webapis}},{key:"supportsCaptions",value:function(){return!1}}]),u(t,[{key:"componentDidMount",value:function(){document.addEventListener("visibilitychange",this.onVisibleChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",this.onVisibleChange)}},{key:"onVisibleChange",value:function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()}},{key:"load",value:function(e){var n=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),webapis.avplay.stop(),webapis.avplay.open(e),webapis.avplay.setDisplayRect(0,0,1920,1080),webapis.avplay.setDisplayMethod(this.displayModes[this.displayMode]),webapis.avplay.setListener({onstreamcompleted:this.onStreamingCompleted.bind(this),onbufferingstart:function(){n.setState({buffering:!0})},onbufferingcomplete:function(){n.setState({buffering:!1})},oncurrentplaytime:function(e){n.setState({currentTime:e})}}),webapis.avplay.prepareAsync(function(){n.setState({totalTime:webapis.avplay.getDuration()}),n.play()})}},{key:"play",value:function(){try{webapis.avplay.play(),this.setState({playing:!0}),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF)}catch(e){console.log("avplay is in a wrong state")}}},{key:"supportsCaptions",value:function(){return!1}},{key:"pause",value:function(){try{webapis.avplay.pause(),this.setState({playing:!1}),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)}catch(e){console.log("avplay is in a wrong state")}}},{key:"stop",value:function(){webapis.avplay.stop(),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)}},{key:"skipTo",value:function(e){webapis.avplay.seekTo(e),this.setState({currentTime:e})}},{key:"jumpForward",value:function(e){webapis.avplay.jumpForward(e),this.setState({currentTime:webapis.avplay.getCurrentTime()})}},{key:"jumpBackward",value:function(e){webapis.avplay.jumpBackward(e),this.setState({currentTime:webapis.avplay.getCurrentTime()})}},{key:"render",value:function(){return c["default"].createElement("div",null,c["default"].createElement("object",{id:"av-player",type:"application/avplayer"}),c["default"].createElement("img",{src:this.props.poster,style:{width:"100%",position:"absolute"}}))}},{key:"switchMode",value:function(){this.displayMode=(this.displayMode+1)%this.displayModes.length,webapis.avplay.setDisplayMethod(this.displayModes[this.displayMode])}}]),t}(f["default"]);e["default"]=p}),require.register("views/video-player/video-player-html5.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t("react"),c=r(l),d=t("./base-video-player"),f=r(d),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onError=n.onError.bind(n),n.onStreamingCompleted=n.onStreamingCompleted.bind(n),n.onStreamingCompleted=n.onStreamingCompleted.bind(n),n.onLoadedMetaData=n.onLoadedMetaData.bind(n),n.onTimeUpdate=n.onTimeUpdate.bind(n),n.onPlay=n.onPlay.bind(n),n.onPause=n.onPause.bind(n),n.onWaiting=n.onWaiting.bind(n),n.onPlaying=n.onPlaying.bind(n),n}return s(t,e),u(t,null,[{key:"isSupported",value:function(){return!0}},{key:"supportsCaptions",value:function(){return!0}}]),u(t,[{key:"componentDidMount",value:function(){this.refs.player.addEventListener("ended",this.onStreamingCompleted),this.refs.player.addEventListener("loadedmetadata",this.onLoadedMetaData),this.refs.player.addEventListener("timeupdate",this.onTimeUpdate),this.refs.player.addEventListener("play",this.onPlay),this.refs.player.addEventListener("pause",this.onPause),this.refs.player.addEventListener("waiting",this.onWaiting),this.refs.player.addEventListener("playing",this.onPlaying)}},{key:"componentWillUnmount",value:function(){null!=this.refs.player&&(this.refs.player.removeEventListener("ended",this.onStreamingCompleted),this.refs.player.removeEventListener("loadedmetadata",this.onLoadedMetaData),this.refs.player.removeEventListener("timeupdate",this.onTimeUpdate),this.refs.player.removeEventListener("play",this.onPlay),this.refs.player.removeEventListener("pause",this.onPause),this.refs.player.removeEventListener("waiting",this.onWaiting),this.refs.player.removeEventListener("playing",this.onPlaying),this.stop())}},{key:"onLoadedMetaData",value:function(){this.setState({totalTime:1e3*this.refs.player.duration})}},{key:"onTimeUpdate",value:function(){this.setState({currentTime:1e3*this.refs.player.currentTime})}},{key:"onPlay",value:function(){this.setState({playing:!0})}},{key:"onPause",value:function(){this.setState({playing:!1})}},{key:"onWaiting",value:function(){this.setState({buffering:!0})}},{key:"onPlaying",value:function(){this.setState({buffering:!1})}},{key:"load",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.refs.player.pause(),this.refs.player.src=e,this.refs.player.load(),this.refs.player.play()}},{key:"toggleCaptions",value:function(e){var t=Array.from(this.refs.player.textTracks).map(function(t){var n=e||("hidden"==t.mode?"showing":"hidden");return t.mode=n,n});return t.length>0?t[0]:null}},{key:"supportsCaptions",value:function(){return!0}},{key:"play",value:function(){this.refs.player.play()}},{key:"pause",value:function(){this.refs.player.pause()}},{key:"stop",value:function(){this.refs.player.pause(),this.refs.player.src=""}},{key:"skipTo",value:function(e){this.refs.player.currentTime=e/1e3}},{key:"jumpForward",value:function(e){this.refs.player.currentTime+=e/1e3}},{key:"jumpBackward",value:function(e){this.refs.player.currentTime-=e/1e3}},{key:"onError",value:function(e){"function"==typeof this.props.onError&&this.props.onError(e.target.error)}},{key:"render",value:function(){return c["default"].createElement("video",{crossOrigin:"anonymous",ref:"player",onError:this.onError,poster:this.props.poster,type:"video/mp4"},this.props.captionUrl&&c["default"].createElement("track",{kind:"subtitles",label:"Deutsche Untertitel",src:this.props.captionUrl,srcLang:"de"}))}}]),t}(f["default"]);e["default"]=p}),require.register("views/video-player/video-player-samsung.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=t("./video-player-html5"),c=r(l),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"play",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF)}},{key:"pause",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)}},{key:"stop",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this),webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)}}],[{key:"isSupported",value:function(){return"undefined"!=typeof webapis}}]),t}(c["default"]);e["default"]=d}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
