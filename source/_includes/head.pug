if page.share-title
  - var title = page.share-title
else if page.title
  - var title = page.title
else
  - var title = site.title


if page.share-description
  - var description = page.share-description
else if page.subtitle
  - var description = page.subtitle
else
  //- var excerpt_length = site.excerpt_length | default: 50
  //- var description = {{ page.content | strip_html | xml_escape | truncatewords: excerpt_length | strip }}


if page.share-img
  - var img = page.share-img
else if page.cover-img
  if page.cover-img.first
    - var img = page.cover-img[0].first.first
  else
    - var img = page.cover-img
else if page.thumbnail-img
  - var img = page.thumbnail-img
else if site.avatar
  - var img = site.avatar
//- var img = img | strip



meta(charset="utf-8")
meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
title= title

if site.author
  meta(name="author" content=site.author)

meta(name="description" content=description)

if site.mobile-theme-col
  meta(name="theme-color" content=site.mobile-theme-col)

if site.keywords
  meta(name="keywords" content=site.keywords)

- var feedurl = '/feed.xml'
//- | absolute_url
link(rel="alternate" type="application/rss+xml"
  title=site.title href=feedurl)

// include gtag.html
// include gtm_head.html
// include google_analytics.html

if layout.common-ext-css
  for css in layout.common-ext-css
    // include ext-css.html css=css

if layout.common-css
  for css in layout.common-css
    // link(rel="stylesheet" href="{{ css | relative_url }}")

if site.site-css
  for css in site.site-css
    // link(rel="stylesheet" href="{{ css | relative_url }}")

if page.ext-css
  for css in page.ext-css
    //include ext-css.html css=css

if page.css
  for css in page.css
    // link(rel="stylesheet" href="{{ css | relative_url }}")

if site.fb_app_id
  meta(property="fb:app_id" content=site.fb_app_id)

if site.title
  meta(property="og:site_name" content=site.title)

meta(property="og:title" content=title)
meta(property="og:description" content=description)

if img != ""
  meta(property="og:image" content="{{ img | absolute_url }}")

if page.id
  meta(property="og:type" content="article")
  meta(property="og:article:author" content="{{ site.author }}")
  meta(property="og:article:published_time" content="{{ page.date | date_to_xmlschema }}")
  meta(property="og:url" content="{{ page.url | absolute_url }}")
  link(rel="canonical" href="{{ page.url | absolute_url }}")
else
  meta(property="og:type" content="website")
  meta(property="og:url" content="{{ page.url | absolute_url | strip_index }}")
  link(rel="canonical" href="{{ page.url | absolute_url | strip_index }}")

if img != "" && img != site.avatar
  meta(name="twitter:card" content="summary_large_image")
else
  meta(name="twitter:card" content="summary")

meta(name="twitter:site" content="@{{ site.social-network-links.twitter }}")
meta(name="twitter:creator" content="@{{ site.social-network-links.twitter }}")

meta(property="twitter:title" content=title)
meta(property="twitter:description" content=description)

if img != ""
  meta(name="twitter:image" content="!{ img | absolute_url }")

if page.head-extra
  for file in page.head-extra
    //include {{ file }}



link(href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet")
// in your header templates
script.
  if ("serviceWorker" in navigator)
    navigator.serviceWorker.register("/service-worker.js");
